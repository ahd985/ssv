{"version":3,"sources":["ssv.es6"],"names":[],"mappings":"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","file":"ssv-compiled.js","sourcesContent":["// Main class to generate contextual information of ssv setup\nclass ElementContext {\n    constructor(uuid, x_series, element_data, svg_overlays) {\n        // Initialize properties\n        this.uuid = uuid;\n        this.svg_selector = '#' + this.uuid + ' #ssv-svg';\n        this.svg_div_selector = '#' + this.uuid + ' .ssv-visual';\n        this.svg_zoom_selector = '#' + this.uuid + ' #zoom-container';\n        this.svg_overlay_selector = '#' + this.uuid + ' #ssv-overlay';\n        // -- Element_data is the 'y' data representing svg elements that corresponds to the x_series data\n        this.x_series = x_series;\n        this.element_data = element_data;\n\n        this.elements = [];\n        // -- Simulation interface properties - control automatic play, play speed, etc\n        this.controls = {\n            // control state information\n            play_enabled: false,\n            pan_zoom_enabled: true,\n            slider_moving: false,\n            current_x: 0,\n            target_x: 0,\n            play_speed: 1,\n            max_speed: 8,\n            min_speed: 1,\n            speed_mult: 2,\n            // control selectors\n            play_selector: '#' + this.uuid + ' #play-button',\n            pan_zoom_selector: '#' + this.uuid + ' #pan-zoom-button',\n            slider_selector: '#' + this.uuid + ' .range-slider',\n            speed_selector: '#' + this.uuid + ' #speed-button',\n            x_val_selector: '#' + this.uuid + ' #x-series-val',\n            pause_icon_selector: '#' + this.uuid + ' #pause-icon',\n            play_icon_selector: '#' + this.uuid + ' #play-icon',\n            pan_zoom_enabled_icon_selector: '#' + this.uuid + ' #pan-zoom-enabled-icon',\n            pan_zoom_disabled_icon_selector: '#' + this.uuid + ' #pan-zoom-disabled-icon'\n        };\n\n        // -- Pattern overlay (e.g., water) data provided by Python\n        // AHD see https://jsfiddle.net/96txdmnf/1/\n        this.svg_overlays = svg_overlays;\n\n        // Call all initialization functions\n        console.log(\"starting\")\n        this.initialize_overlays();\n        console.log(\"overlays done\")\n        this.set_font_scale();\n        console.log(\"set font scale\")\n        this.initialize_controls();\n        console.log(\"set controls\")\n        this.initialize_elements();\n        console.log(\"set elements\")\n        this.initialize_pan_zoom();\n        console.log(\"set pan zoom\")\n    }\n\n    // Initializer of svg pattern overlays (e.g., water pattern overlays).  These are inserted into\n    // the svg 'defs' child for reference by svg elements.\n    initialize_overlays() {\n        var svg = d3.select(this.svg_selector);\n        if (svg.select('defs').empty()) {\n            svg.append('defs')\n        }\n\n        for (var k in this.svg_overlays) {\n            svg.select('defs').html(svg.select('defs').html() + this.svg_overlays[k])\n        }\n    };\n\n    // Function to calculate scale of svg view box to parent svg div\n    // This is required to scale user input font size correctly\n    set_font_scale() {\n        var font_scale = parseFloat(d3.select(this.svg_selector).attr('viewBox').split(' ')[3]) /\n            d3.select(this.svg_div_selector).node().getBoundingClientRect().height;\n        this.font_scale = font_scale;\n        d3.select(this.svg_selector).attr('font-scale', font_scale)\n    };\n\n    initialize_elements() {\n        for (var element_type in this.element_data) {\n            for (var element in this.element_data[element_type]) {\n                element = this.element_data[element_type][element];\n                if (element_type == 'cell') {\n                    this.elements.push(new Cell(this.uuid, element.ids, element.description,\n                        element.conditions, element.report_id))\n                } else if (element_type == 'line') {\n                    this.elements.push(new Line(this.uuid, element.ids, element.description,\n                        element.conditions, element.report_id))\n                } else if (element_type == 'heatmap') {\n                    this.elements.push(new Heatmap(this.uuid, element.ids, element.description,\n                        element.conditions, element.report_id))\n                } else if (element_type == 'toggle') {\n                    this.elements.push(new Toggle(this.uuid, element.ids, element.description,\n                        element.conditions, element.report_id))\n                } else if (element_type == 'report') {\n                    this.elements.push(new Report(this.uuid, element.ids, element.description,\n                        element.conditions, element.report_id))\n                } else if (element_type == 'table') {\n                    this.elements.push(new Table(this.uuid, element.ids, element.description,\n                        element.conditions, element.report_id))\n                } else if (element_type == 'legend') {\n                    this.elements.push(new Legend(this.uuid, element.ids, element.description,\n                        element.conditions, element.report_id))\n                }\n            }\n        }\n\n        // Draw elements at x index of 0\n        this.update_elements(0);\n\n        // Delete extra data\n        delete this.element_data;\n        // We can delete conditions since the data are now bound to the DOM.\n        this.elements.map(function(d) {\n            if ('conditions' in d) {delete d.conditions}\n        })\n    };\n\n    // Function to tell all manipulated element classes to update rendering given index of this.x_series\n    update_elements(x) {\n        d3.select(this.controls.x_val_selector).html(num_format(this.x_series[x]));\n        for (var element in this.elements) {\n            this.elements[element].update(x);\n        }\n    };\n\n    render_slider() {\n        var context = this;\n        var bbox = d3.select('#' + context.uuid + ' .modebar').node().getBoundingClientRect();\n        var height = bbox.height;\n        var margin = 2;\n        var handle_r = 8;\n        var width = bbox.width - d3.select('#' + context.uuid + \" .modebar-group\").node().getBoundingClientRect().width;\n\n        var x = d3.scaleLinear()\n            .domain([0, context.x_series.length - 1])\n            .range([0, width - 2*(margin + handle_r)])\n            .clamp(true);\n\n        var slider_div = d3.select('#' + context.uuid + \" .modebar-slider\");\n        slider_div.selectAll(\"svg\").remove();\n        var slider = slider_div.append(\"svg\")\n            .attr(\"width\", width)\n            .append(\"g\")\n            .attr(\"transform\",\n                \"translate(\" + (handle_r + margin).toString() + \",\" + (height/2 + margin).toString() + \")\")\n\n        slider.append(\"line\")\n            .attr(\"class\", \"slider-track\")\n            .attr(\"x1\", x.range()[0])\n            .attr(\"x2\", x.range()[1])\n            .select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })\n                .attr(\"class\", \"slider-inset\")\n            .select(function() { return this.parentNode.appendChild(this.cloneNode(true)); })\n                .attr(\"class\", \"slider-overlay\")\n                .call(d3.drag()\n                    .on(\"start.interrupt\", function() {slider.interrupt()})\n                    .on(\"start drag\", function() {\n                        context.controls.target_x = Math.round(x.invert(d3.event.x));\n                        context.move();\n                        handle.attr(\"cx\", x(context.controls.target_x));\n                    }))\n\n        var handle = slider.append(\"circle\")\n            .attr(\"class\", \"slider-handle\")\n            .attr(\"r\", handle_r);\n    };\n\n    play() {\n        var context = this;\n        if (context.controls.play_enabled) {\n                context.controls.play_enabled = false;\n                d3.select(context.controls.pause_icon_selector).attr('style', 'display:none');\n                d3.select(context.controls.play_icon_selector).attr('style', '');\n            } else {\n                context.controls.play_enabled = true;\n                d3.select(context.controls.pause_icon_selector).attr('style', '');\n                d3.select(context.controls.play_icon_selector).attr('style', 'display:none');\n                if (context.controls.current_x >= context.x_series.length - 1) {\n                    context.controls.current_x = 0;\n                }\n                context.x_series_forward()\n        }\n    }\n\n    toggle_pan_zoom() {\n        var context = this;\n        if (context.controls.pan_zoom_enabled) {\n            context.controls.pan_zoom_enabled = false;\n            d3.select(context.controls.pan_zoom_disabled_icon_selector).attr('style', '');\n            d3.select(context.controls.pan_zoom_enabled_icon_selector).attr('style', 'display:none');\n        } else {\n            context.controls.pan_zoom_enabled = true;\n            d3.select(context.controls.pan_zoom_disabled_icon_selector).attr('style', 'display:none');\n            d3.select(context.controls.pan_zoom_enabled_icon_selector).attr('style', '');\n        }\n    }\n\n    move() {\n        var context = this;\n        if (context.controls.slider_moving) return;\n\n        context.controls.slider_moving = true;\n        context.controls.current_x = context.controls.target_x;\n        context.update_elements(context.controls.current_x);\n\n        d3.timer(function() {\n            context.controls.slider_moving = false;\n        },100);\n    };\n\n    // Function to auto update elements based on current x_series position and selected play speed\n    x_series_forward() {\n        var context = this;\n        window.setTimeout(function() {\n            if (context.controls.play_enabled && context.controls.current_x < context.x_series.length - 1) {\n                context.controls.target_x = context.controls.current_x + 1;\n                context.move();\n\n                if (context.controls.current_x < context.x_series.length - 1) {\n                    context.x_series_forward()\n                } else {\n                    context.play();\n                }\n            }\n        }, 1000 / this.controls.play_speed);\n    };\n\n    // Initialize controls for ssv control bar\n    initialize_controls() {\n        var context = this;\n        context.render_slider();\n        d3.select(window).on('resize', function() {context.render_slider});\n\n        // Clicking on play button automates the forward run of the x_series\n        d3.select(this.controls.play_selector)\n            .attr('ssv-id', this.uuid)\n            .on(\"click\", function() {context.play()});\n\n        // Clicking on zoom button toggles pan/zoom ability\n        d3.select(this.controls.pan_zoom_selector)\n            .attr('ssv-id', this.uuid)\n            .on(\"click\", function() {context.toggle_pan_zoom()});\n\n        // Clicking on the speed button changes the speed of play\n        d3.select(this.controls.speed_selector).attr('ssv-id', this.uuid)\n            .on(\"click\", function() {\n                var context = element_contexts[d3.select(this).attr('ssv-id')];\n                if (context.controls.play_speed == context.controls.max_speed) {\n                    context.controls.play_speed = context.controls.min_speed\n                } else {\n                    context.controls.play_speed *= context.controls.speed_mult\n                }\n            var speed = context.controls.play_speed.toString();\n            d3.select(context.controls.speed_selector + ' span')\n                .html(\"<b>\" + speed + 'x</b>')\n        });\n    };\n\n    // Initializer of pan and zoom functionality\n    initialize_pan_zoom() {\n        // Add border to svg to outline zoom/pan zone\n        var ssv_svg = d3.select(this.svg_selector);\n        ssv_svg.append('rect')\n            .attr('height', '100%')\n            .attr('width', '100%')\n            .style('fill', 'none');\n\n        // Get svg, svg parent div dimensions\n        var viewbox = ssv_svg.attr('viewBox').split(' ');\n        var svg_bbox = ssv_svg.node().getBBox();\n        var x1 = parseFloat(viewbox[0]);\n        var x2 = parseFloat(viewbox[2]);\n        var y1 = parseFloat(viewbox[1]);\n        var y2 = parseFloat(viewbox[3]);\n\n        var max_width = (x2 - x1);\n        var max_height = (y2 - y1);\n\n        var div_bbox = d3.select(this.svg_div_selector).node().getBoundingClientRect();\n\n        // Apply overlay to control zoom/pan;\n        var ssv_overlay = d3.select(this.svg_overlay_selector)\n            .attr('y', svg_bbox.y)\n            .attr('height', svg_bbox.height)\n            .attr('x', svg_bbox.x)\n            .attr('width', svg_bbox.width);\n\n        // Apply zoom/pan features and pan limit\n        var context = this;\n        var zoom = d3.zoom()\n            .scaleExtent([1, 8])\n            .on('zoom', function() {\n                if (context.controls.pan_zoom_enabled) {\n                    var scale = d3.event.transform.k;\n                    var tx = Math.max(d3.event.transform.x, -(x2 * scale - max_width));\n                    var tx = Math.min(tx, x1);\n                    var ty = Math.max(d3.event.transform.y, -(y2 * scale - max_height));\n                    var ty = Math.min(ty, y1);\n                    d3.select(context.svg_zoom_selector).attr(\"transform\",\n                        'translate(' + [tx,ty] + ')scale(' + scale + ')');\n                }\n            });\n        d3.select(this.svg_overlay_selector).call(zoom)\n    };\n}\n\n// Number formatting function for report output\nfunction num_format(val) {\n    if (val >= 1000 || val < 0.01) {\n        return d3.format('.2e')(val)\n    } else {\n        return d3.format('.2f')(val)\n    }\n};\n\n// Inheritable parent class of every element type\nclass Element {\n    constructor(uuid, element_ids, element_description, element_conditions, report_id) {\n        this.uuid = uuid;\n        this.svg_selector = '#' + this.uuid + ' #ssv-svg';\n        this.ids = element_ids;\n        // -- Build list of selectors from ids\n        this.selectors = [];\n        for (var i in this.ids) {\n            this.selectors.push('#' + this.uuid + ' #' + this.ids[i])\n        };\n        // -- Report id represents id of placement element for element report - Optional property\n        this.report_id = report_id;\n        this.report_selector = '#' + this.uuid + ' #' +  this.report_id;\n        // -- Element description is printed at top of optional report\n        this.description = element_description;\n        // -- Array of element conditions - data types that describe simulation characteristics such as\n        //    temperature and water levels\n        this.conditions = element_conditions;\n\n        this.patterns_initialized = false;\n        this.report_initialized = false;\n        this.initialize_color_scales();\n    }\n\n    // Loop through conditions and check for color scale\n    // If color scale exists, use d3 to generate domain and range of scale.\n    initialize_color_scales() {\n        this.conditions.map(function(condition) {\n            if ('color_scale' in condition && 'color_levels' in condition) {\n                var color_scale = condition.color_scale;\n                var color_levels = condition.color_levels;\n                condition.color_scale = d3.scaleQuantile()\n                    .domain([d3.min(color_levels), d3.max(color_levels)])\n                    .range(color_scale);\n            };\n        });\n    };\n    \n    // Report initialization function - called if report_id provided and report_initialized == false\n    initialize_report() {\n        var sel = d3.select(this.report_selector);\n        var parent = d3.select(sel.node().parentNode);\n\n        if (!sel.empty()) {\n            // Get bounding box of placement element\n            // Placement element height is not used - height of legend is ultimately determined by user specified\n            // font size\n            var bbox = sel.node().getBBox();\n            var width = bbox.width;\n            var x = bbox.x;\n            var y = bbox.y;\n\n            var header_em = 1.2;\n            var report_em = 1;\n            var margin = 0.1;\n\n            // Set text and background fill colors\n            var header_color = '#FFC107';\n            var description_color = '#00BFA5';\n            var zone_color = '#FFFFFF';\n            var unit_color = '#FFFFFF';\n            var val_color = '#FFEB3B';\n            var report_fill = '#616161';\n            var sizing_text = 'Sizing...';\n\n            // Hide placement element\n            sel.style('visibility', 'hidden');\n\n            // Reference font scale from svg attr\n            var font_scale = d3.select(this.svg_selector).attr('font-scale');\n\n            // Append new parent element for report\n            var report = parent.append('g')\n                .attr('transform', 'translate(' + x + ',' + y + ')')\n                .append('g')\n                .attr('id', 'ssv-report')\n                .attr('font-size', font_scale.toString() + 'em');\n\n            // Create report title outline\n            var title_outline = report.append('rect')\n                .attr('width', width)\n                .attr('fill', report_fill)\n                .attr('fill-opacity', '1')\n                .attr('text-anchor', 'middle')\n                .attr('alignment-baseline', 'after-edge');\n\n            // Create report title text\n            var title_text = report.append('text')\n                .attr('width', width)\n                .attr('fill-opacity', '1')\n                .attr('text-anchor', 'middle')\n                .attr('alignment-baseline', 'after-edge')\n                .attr('x', width / 2)\n                .attr('fill', header_color)\n                .style('font-size', header_em.toString() + 'em')\n                .text(sizing_text);\n\n            // Resize header and outline based on text height\n            var title_text_height = title_text.node().getBBox().height;\n            title_text.attr('y', title_text_height * (1 + margin));\n            var report_text_height = title_text_height * report_em / header_em;\n            var y_count = title_text_height * (1 + 2*margin);\n            title_outline.attr('height', y_count);\n            var y_text = report_text_height * (1 + 1*margin);\n            var y_row = y_text + report_text_height * margin;\n            title_text.text(this.description);\n\n            // Create value output box outlines (backgrounds) and add text boxes\n            // This code adds the condition description, value, and unit (if applicable) in a row by row fashion\n            for (var i = 0; i < this.conditions.length; i++) {\n                var condition = this.conditions[i];\n\n                if (\"report\" in condition && condition.report) {\n                    var condition_data=condition.data;\n                    var data_j_len = 1;\n                    if (condition_data[0].constructor === Array) {\n                        data_j_len = condition_data[0].length\n                    }\n\n                    // Box outline (background)\n                    report.append('rect')\n                        .attr('width', width)\n                        .attr('fill', report_fill)\n                        .attr('fill-opacity', '1')\n                        .attr('text-anchor', 'middle')\n                        .attr('alignment-baseline', 'after-edge')\n                        .attr('y', y_count)\n                        .attr('height', ((data_j_len + 1)*y_row));\n\n                    // Condition description text\n                    report.append('text')\n                        .attr('width', width)\n                        .attr('fill-opacity', '1')\n                        .attr('text-anchor', 'middle')\n                        .attr('alignment-baseline', 'after-edge')\n                        .attr('x', width / 2)\n                        .attr('y', y_count + y_text)\n                        .attr('fill', description_color)\n                        .style('font-size', report_em.toString() + 'em')\n                        .attr('font-style', 'oblique')\n                        .text(condition.description);\n\n                    // Check if we have a section label property in the condition.  If not, default to 'Section'.\n                    var section_label;\n                    'section_label' in condition && condition.section_label != '' ?\n                        section_label = condition.section_label: section_label = 'Section';\n\n                    y_count += y_row;\n\n                    // Loop through condition data axis #2 and add row for each entry\n                    for (var j = 0; j < data_j_len; j++) {\n                        // Do we have a defined second access in the data?  If not, we only need 2 boxes for the section\n                        // (value and unit) else we need 3 (section_label, value, and unit)\n                        var num_sections;\n                        data_j_len > 1 ? num_sections = 3 : num_sections = 2;\n\n                        // Add Zone # if data_j_len > 1\n                        if (data_j_len > 1) {\n                            report.append('text')\n                                .attr('width', width)\n                                .attr('fill-opacity', '1')\n                                .attr('text-anchor', 'middle')\n                                .attr('alignment-baseline', 'after-edge')\n                                .attr('x', width / (num_sections * 2))\n                                .attr('y', y_count + y_text)\n                                .attr('fill', zone_color)\n                                .style('font-size', report_em.toString() + 'em')\n                                .text(section_label + ' #' + (j + 1).toString());\n                        }\n\n                        // Value text\n                        var datum;\n                        data_j_len > 1 ? datum = condition_data.map(function(i) {return num_format(i[j])}) :\n                            datum = condition_data.map(function(i) {return num_format(i)});\n                        report.append('text')\n                            .attr('width', width)\n                            .attr('fill-opacity', '1')\n                            .attr('text-anchor', 'middle')\n                            .attr('alignment-baseline', 'after-edge')\n                            .attr('class', 'value-text')\n                            .datum(datum)\n                            .attr('x', width / (2 * (4 - num_sections)))\n                            .attr('y', y_count + y_text)\n                            .attr('fill', val_color)\n                            .style('font-size', report_em.toString() + 'em');\n\n                        // Unit text\n                        report.append('text')\n                            .attr('width', width)\n                            .attr('fill-opacity', '1')\n                            .attr('text-anchor', 'middle')\n                            .attr('alignment-baseline', 'after-edge')\n                            .attr('x', (num_sections * 2 - 1) * width / (2 * num_sections))\n                            .attr('y', y_count + y_text)\n                            .attr('fill', unit_color)\n                            .style('font-size', report_em.toString() + 'em')\n                            .text(condition.unit);\n\n                        // Increment em_count by ems used per row\n                        y_count += y_row;\n                    }\n                }\n            }\n        }\n\n        // Report is initialized - prevent further initialization\n        this.report_initialized = true\n    };\n\n    // Function to update report given index in x-series\n    update_report(x) {\n        // Initialize report if not initialized\n        if (!this.report_initialized) {this.initialize_report()}\n\n        // Get parent of element with report_id and select all value text in report\n        var parent = d3.select(d3.select(this.report_selector).node().parentNode);\n        var value_texts = parent.selectAll('.value-text')\n            .text(function(d) {return d[x]});\n    };\n\n    // Function to initialize patterns for element\n    initialize_pattern(sel, pattern_id, prop_data, style_apply) {\n        // Add svg defs section if none exist\n        var svg = d3.select(this.svg_selector);\n        if (svg.select('defs').empty()) {\n            svg.append('defs')\n        }\n\n        // Sort prop data and denormalize order prop\n        var norm_val = sel.getBBox().height;\n        if (prop_data[0].length > 1) {\n            prop_data = prop_data.map(function(t) {return t.sort(function(a,b) {return -(a[0] - b[0])})});\n        }\n        var prop_data = prop_data.map(function(t) {\n            return t.map(function(d) {\n                var order = Math.max(0, 1 - d[0]) * norm_val;\n                return [order].concat(d.slice(1, d.length))\n            })\n        });\n\n        // Build pattern and apply initial state\n        var defs = d3.select('#' + this.uuid + ' svg defs');\n        var pattern = defs.append('pattern')\n            .attr('id', pattern_id)\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('width', '100%')\n            .attr('height', '100%')\n            .attr('patternContentUnits', 'userSpaceOnUse')\n            .datum(prop_data);\n\n        var pattern_data = pattern.selectAll()\n            .data(function(t) {return t[0]})\n            .enter();\n\n        pattern_data.each(function() {\n            // Add base pattern\n            pattern.append('rect')\n                .attr('id', 'base')\n                .attr('x','0')\n                .attr('width','100%')\n                .attr('height', '100%');\n\n            // Add transition zones\n            pattern.append('rect')\n                .attr('id', 'transition')\n                .attr('x','0')\n                .attr('width','100%')\n                .attr('height','1px')\n                .attr('fill', '#FFFFFF');\n\n            // Add overlays\n            pattern.append('rect')\n                .attr('id', 'overlay')\n                .attr('x','0')\n                .attr('width', '100%')\n                .attr('height', '100%');\n        });\n\n        var el = d3.select(sel);\n        // Set to stroke or fill based on style_apply\n        style_apply == 'fill' ? el.style('fill', 'url(#' + pattern_id + ')') :\n            el.style('stroke', 'url(#' + pattern_id + ')');\n\n        // Set initial opacities to 1\n        el.style('fill-opacity', 1);\n        el.style('opacity', 1);\n    };\n    \n    update_pattern(x, sel, pattern_id) {\n        var pattern = d3.select('#' + this.uuid + ' #' + pattern_id);\n\n        // Update base pattern\n        pattern.selectAll('#base')\n            .data(function(t) {return t[x]})\n            .transition()\n            .attr('y', function(d) {return d[0]})\n            .style('fill', function(d) {return d[1]})\n            .style('opacity', function(d) {return d[2]});\n\n        // Update transition zones\n        pattern.selectAll('#transition')\n            .data(function(t) {return t[x]})\n            .transition()\n            .attr('y', function(d) {if (d[0] > 0) {return d[0]} else {return '-1%' }})\n            .style('opacity', function(d) {return d[2]});\n\n        // Update overlays\n        pattern.selectAll('#overlay')\n            .data(function(t) {return t[x]})\n            .transition()\n            .attr('fill', function(d) {if(d[3] == null) {return 'none'} else {return 'url(#' + d[3] + ')'}})\n            .attr('y', function(d) {return d[0]})\n            .style('opacity', function(d) {return d[2]});\n    }\n}\n\n// Wrapper class for closed path elements\nclass Cell extends Element {\n    constructor(uuid, cell_ids, cell_description, cell_conditions, cell_report_id) {\n        super(uuid, cell_ids, cell_description, cell_conditions, cell_report_id)\n    }\n\n    update(x) {\n        var _cell = this;\n        _cell.selectors.map(function(d, i) {\n            var sels = d3.selectAll(d);\n            var pattern_id = 'pattern_' + _cell.ids[i];\n\n            if (!_cell.patterns_initialized) {\n                var prop_data = [];\n                var order_prop = 'y';\n                var props = [order_prop, 'color', 'opacity', 'overlay'];\n\n                _cell.conditions.map(function(condition) {\n                    var order_val, color, opacity, overlay;\n                    var max_order = 1.01;\n\n                    'overlay' in condition ? overlay = condition.overlay : overlay = null;\n                    if (condition.type == 'background') {\n                        // background represents a changing cell background color only\n                        // always 100% of the element height\n                        prop_data.push(condition.data.map(function(d) {\n                            return [max_order, condition.color_scale(d), condition.opacity, overlay]\n                        }));\n                    } else if (condition.type == 'levelstatic') {\n                        // level_static represents a changing level in a cell that does not change color\n                        prop_data.push(condition.data.map(function(d) {\n                            var order_val = (Math.min((d - condition.min_height) /\n                                (condition.max_height - condition.min_height)), 1);\n                            return [order_val, condition.color, condition.opacity, overlay]\n                        }));\n                    } else if (condition.type == 'dynamiclevel') {\n                        // level_dynamic represents a changing level in a cell that changes color\n                        prop_data.push(condition.data.map(function(d, j) {\n                            var order_val = Math.min((d - condition.min_height) /\n                                (condition.max_height - condition.min_height), 1);\n                            var color = condition.color_scale(condition.data_dynamic[j]);\n                            return [order_val, color, condition.opacity, overlay]\n                        }));\n                    } else if (condition.type == 'logical') {\n                        // logical represents a filled cell that alternates between two colors\n                        // always 100% of element height\n                        prop_data.push(condition.data.map(function(d) {\n                            var color;\n                            d ? color = condition.true_color : color = condition.false_color;\n                            return [max_order, color, condition.opacity, overlay]\n                        }));\n                    } else if (condition.type == 'zonaly') {\n                        // zonal_y represents a zonal model in the y direction\n                        // number of zones dictated by len of 2nd axis\n                        var prop_data_slice = [];\n                        prop_data_slice = prop_data_slice.concat(condition.data.map(function(arr, j) {\n                            return arr.map(function(d, k) {\n                                var order_val = Math.min((d - condition.min_height) /\n                                    (condition.max_height - condition.min_height), 1);\n                                var color = condition.color_scale(condition.data_dynamic[j][k]);\n                                return [order_val, color, condition.opacity, overlay]\n                            })\n                        }));\n                        prop_data = prop_data.concat(d3.zip.apply(this, prop_data_slice));\n                    }\n                });\n\n                // Zip data\n                prop_data = d3.zip.apply(this, prop_data);\n\n                // Apply pattern to each in sels list\n                sels.each(function() {\n                    _cell.initialize_pattern(this, pattern_id, prop_data, 'fill');\n                });\n            }\n\n            sels.each(function() {\n                _cell.update_pattern(x, this, pattern_id);\n            });\n        });\n\n        _cell.patterns_initialized = true;\n        if (_cell.report_id) {_cell.update_report(x)}\n    };\n}\n\n// Wrapper class for line (or open path) elements\nclass Line extends Element {\n    constructor(uuid, line_ids, line_description, line_conditions, line_report_id) {\n        super(uuid, line_ids, line_description, line_conditions, line_report_id)\n    }\n\n    update(x) {\n        var _line = this;\n        _line.selectors.map(function(d, i) {\n            var sels = d3.selectAll(d);\n            var pattern_id = 'pattern_' + _line.ids[i];\n            var prop_data = [];\n\n            if (!_line.patterns_initialized) {\n                _line.conditions.map(function(condition) {\n                    var order_val, color, opacity, overlay;\n                    var max_order = 1.01;\n                    var order_prop = 'y';\n                    var props = [order_prop, 'color', 'opacity', 'overlay'];\n\n                    var opacity = condition.opacity;\n                    var overlay = null;\n\n                    if (condition.type == 'equaly') {\n                        // equal_y represents an open path element with equally sized patterns along the y axis\n                        // number of y regions dictated by len of 2nd axis\n                        var prop_data_slice = [];\n                        var prop_data_slice = prop_data_slice.concat(condition.data.map(function(arr) {\n                            return arr.map(function(d, k) {\n                                var order_val = k / arr.length;\n                                var color = condition.color_scale(d);\n                                return [order_val, color, condition.opacity, overlay]\n                            })\n                        }));\n\n                        prop_data = prop_data.concat(d3.zip.apply(this, prop_data_slice));\n                    }\n                });\n\n                // Zip data\n                prop_data = d3.zip.apply(this, prop_data);\n\n                sels.each(function() {\n                    _line.initialize_pattern(this, pattern_id, prop_data, 'stroke')\n                });\n            };\n            sels.each(function() {\n                _line.update_pattern(x, this, pattern_id);\n            });\n        });\n\n        _line.patterns_initialized = true;\n        if (_line.report_id) {_line.update_report(x)}\n    };\n}\n\n// Wrapper class for generating heatmaps\nclass Heatmap extends Element {\n    constructor(uuid, heatmap_ids, heatmap_description, heatmap_conditions, heatmap_report_id) {\n        super(uuid, heatmap_ids, heatmap_description, heatmap_conditions, heatmap_report_id);\n\n        this.conditions[0].data[0].constructor == Array ? this.conditions.num_sections =\n            this.conditions[0].data[0].length : this.conditions[0].num_sections = 1;\n\n        this.initialize();\n    }\n\n    initialize() {\n        var initial_vals = this.conditions[0].data[0];\n\n        var _heatmap = this;\n        _heatmap.selectors.map(function(d) {\n            var sel = d3.select(d);\n            var parent = d3.select(sel.node().parentNode);\n\n            var bbox = sel.node().getBBox();\n\n            // Assume heatmap occupies entire placement element bounding box\n            var x = d3.scaleLinear().domain([0, initial_vals[0].length]).range([0, bbox.width]);\n            var y = d3.scaleLinear().domain([0, initial_vals.length]).range([0, bbox.height]);\n            var g = parent.append('g')\n                .attr('transform', 'translate(' + bbox.x + ',' + bbox.y + ')')\n                .append('g');\n\n            // go through data and apply color scale\n            var scale = _heatmap.conditions[0].color_scale;\n            var data = _heatmap.conditions[0].data.map(function(arr_2d) {\n                return arr_2d.map(function(arr) {\n                    return arr.map(function(d) {\n                        return scale(d)\n                    });\n                });\n            });\n            g.data([data]);\n\n            // Create cross-sectional slice along the x axis\n            var x_section = g.selectAll()\n                .data(function(d) {return d[0]})\n                .enter()\n                .append('g')\n                .attr('class', 'x_section')\n                .attr('stroke', 'black')\n                .attr('stroke-width','1px');\n\n            // Add a color bin for every y slot across the axis\n            x_section.selectAll('.bin')\n                .data(function (d) {return d})\n                .enter().append('rect')\n                .attr('class', 'bin')\n                .attr('x', function (d, i) {return x(i)})\n                .attr('width', function (d, i) {return  x(i + 1) - x(i)})\n                .style('fill', function (d) {return d})\n                .style('fill-opacity', function (d) {return _heatmap.conditions[0].opacity})\n                .attr('height', bbox.height / (initial_vals.length));\n\n            x_section.each(function (d, i) {d3.select(this).selectAll(\".bin\").attr(\"y\", y(i))});\n        });\n    };\n\n    update(x) {\n        var _heatmap = this;\n        _heatmap.selectors.map(function(d) {\n            var sel = d3.select(d);\n            var parent = d3.select(sel.node().parentNode);\n\n            var g = parent.select('g').select('g');\n\n            var x_section = g.selectAll('.x_section').data(function(d) {return d[x]});\n            x_section.selectAll('.bin')\n                .data(function (d) { return d; })\n                .transition()\n                .style('fill', function(d) {return d});\n        });\n\n        if (_heatmap.report_id) {_heatmap.update_report(x)}\n    };\n}\n\n// Wrapper class for state-type elements (e.g., show/hide)\nclass Toggle extends Element {\n    constructor(uuid, toggle_ids, toggle_description, toggle_conditions, toggle_report_id) {\n        super(uuid, toggle_ids, toggle_description, toggle_conditions, toggle_report_id);\n        this.data_initialized = false;\n    }\n\n    update(x) {\n        var _toggle = this;\n        _toggle.selectors.map(function(d) {\n            var sel = d3.selectAll(d);\n\n            if (!_toggle.data_initialized) {\n                if (_toggle.conditions[0].type == 'showhide') {\n                    sel.datum(_toggle.conditions[0].data)\n                }\n            }\n\n            var data = sel.datum();\n            if (data[x] || data[x] > 0) {\n                sel.transition().attr('opacity',1)\n            } else {\n                sel.transition().attr('opacity',0)\n            }\n        });\n\n        _toggle.data_initialized = true;\n        if (_toggle.report_id) {_toggle.update_report(x)}\n    };\n}\n\n// Wrapper class for element reports\nclass Report extends Element {\n    constructor(uuid, report_ids, report_description, report_conditions, report_id) {\n        super(uuid, report_ids, report_description, report_conditions, report_id);\n    }\n\n    update(x) {\n        if (this.report_id) {this.update_report(x)}\n    };\n}\n\n// Wrapper class for tablular report\nclass Table extends Element {\n    constructor(uuid, report_ids, report_description, report_conditions, report_id) {\n        super(uuid, report_ids, report_description, report_conditions, report_id);\n    }\n\n    // If we have tabular (table-like) data overwrite base element report function\n    initialize_report() {\n        var sel = d3.select(this.report_selector);\n        var parent = d3.select(sel.node().parentNode);\n\n        if (!sel.empty()) {\n            // Get bounding box of placement element\n            // Placement element height is not used - height of legend is ultimately determined by user specified\n            // font size\n            var bbox = sel.node().getBBox();\n            var width = bbox.width;\n            var x = bbox.x;\n            var y = bbox.y;\n            var table_id = 'table_' + this.report_id;\n\n            // Hide placement element\n            sel.style('visibility', 'hidden');\n\n            // Reference font scale from svg attr\n            var font_scale = d3.select(this.svg_selector).attr('font-scale');\n\n            // Append new parent element for table\n            var table = parent.append('g')\n                .attr('transform', 'translate(' + x + ',' + y + ')')\n                .append('foreignObject')\n                .attr('id', 'ssv-table')\n                .attr(\"width\", width)\n                .attr(\"height\", 500)\n                .append('xhtml:table')\n                .attr('class', 'table')\n                .attr('id', table_id)\n                .datum(this.conditions[0].data);\n\n            // Add table header\n            table.append('thead').append('tr')\n                .selectAll()\n                .data(this.conditions[0].headers)\n                .enter()\n                .append('th')\n                .text(function(d) {return d})\n                .style('font-size', font_scale.toString() + 'em');\n            }\n\n            // Add tbody\n            table.append('tbody');\n\n        // Report is initialized - prevent further initialization\n        this.report_initialized = true\n    };\n\n    update_report(x) {\n        if (!this.report_initialized) {this.initialize_report()};\n\n        var table_id = 'table_' + this.report_id;\n        var font_scale = d3.select(this.svg_selector).attr('font-scale');\n        var table = d3.select('#' + this.uuid + ' #' + table_id + ' tbody');\n\n        // Add content\n        var row = table.selectAll('.content-row')\n            .data(function(d) {return d[x]});\n        row.exit().remove();\n        row.enter()\n            .append('tr')\n            .merge(row)\n            .attr('class', 'content-row');\n\n        var cell = table.selectAll('.content-row').selectAll('.content-cell')\n            .data(function(d) {return d});\n        cell.exit().remove();\n        cell.enter()\n            .append('td')\n            .merge(cell)\n            .text(function(d) {return d})\n            .style('font-size', font_scale.toString() + 'em')\n            .attr('class', 'content-cell');\n    };\n\n    update(x) {\n        if (this.report_id) {this.update_report(x)}\n    };\n}\n\n// Wrapper class for legend\nclass Legend extends Element {\n    constructor(uuid, legend_ids, legend_description, legend_conditions, report_id) {\n        super(uuid, legend_ids, legend_description, legend_conditions, report_id)\n    }\n\n    // Overwrite base element report function to show color scale\n    initialize_report() {\n        var sel = d3.select(this.report_selector);\n        var parent = d3.select(sel.node().parentNode);\n        \n        var font_scale = d3.select(this.svg_selector).attr('font-scale');\n\n        // If scale selector not empty fill it in with color scale legend\n        if (!sel.empty()) {\n            // Hide original placement element\n            sel.style('visibility', 'hidden');\n\n            // Get bounding box of placement element\n            // Placement element height is not used - height of legend is ultimately determined by user specified\n            // font size\n            var bbox = sel.node().getBBox();\n            var width = bbox.width;\n            var pos_x = bbox.x;\n            var pos_y = bbox.y;\n\n            // Append legend outline to parent of placement element\n            // Set legend font size to font scale property\n            var parent = d3.select(sel.node().parentNode);\n            var legend = parent.append('g').attr('transform', 'translate(' + pos_x + ',' + pos_y + ')')\n                .append('g')\n                .attr('font-size', font_scale + 'em')\n                .attr('stroke', 'black')\n                .attr('stroke-width','0.01em');\n\n            // Calculate discrete color bin scale\n            var color_scale = this.conditions[0].color_scale;\n            var scale_len = color_scale.range().length;\n            var x = d3.scaleLinear()\n                .domain([0, scale_len])\n                .range([0, width]);\n\n            // Generate legend\n            // 'header_em' represents the color scale title font size\n            // 'label' represents the color scale bin values font size\n            var header_em = 1.5;\n            var label_em = 1;\n            var margin = 0.1\n\n            // -- Append header text\n            var legend_text = legend.append('text')\n                .text(this.description)\n                .attr('x', (width/2))\n                .attr('y', '1em')\n                .attr('text-anchor', 'middle')\n                .attr('font-size', header_em.toString() + 'em');\n            var legend_text_height = legend_text.node().getBBox().height;\n\n            // -- Generate range of colors required for legend\n            var keys = legend.selectAll('rect').data(color_scale.range());\n\n            // -- Append a rect for every color on the legend\n            // -- Rects are same height as header text\n            keys.enter().append('rect')\n                .attr('x', function(d,i) {return x(i)})\n                .attr('y', (1 + margin) * legend_text_height)\n                .attr('width', function(d,i) {return x(i+1) - x(i)})\n                .attr('height', legend_text_height)\n                .attr('fill', function(d) {return d})\n                .style('fill-opacity', this.conditions[0].opacity)\n                .attr('font-size', header_em.toString() + 'em');\n\n            // -- Append value text immediately below the left-most area of every color rect\n            keys.enter().append('text')\n                .text(function(d) {return color_scale.invertExtent(d)[0].toFixed(0)})\n                .attr('x', function(d,i) {return x(i)})\n                .attr('y', legend_text_height*(2 + margin + label_em / header_em * (1 + margin)))\n                .attr('text-anchor', 'middle')\n                .attr('font-size', label_em.toString() + 'em');\n        }\n\n        // Report is initialized - prevent further initialization\n        this.report_initialized = true\n    };\n\n    update_report(x) {\n        if (!this.report_initialized) {this.initialize_report()}\n    };\n\n    update(x) {\n        if (this.report_id) {this.update_report(x)}\n    };\n}\n\n// Error catching\nwindow.onerror=function(msg){\n    d3.select(\"body\").attr(\"JSError\",msg);\n};\n\nvar element_contexts = {};\nfunction add_element_context(uuid, x_series, element_data, svg_overlays) {\n    element_contexts[uuid] = new ElementContext(uuid, x_series, element_data, svg_overlays)\n}\n\n\n"]}