!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ssv=t()}}(function(){return function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return r(n?n:t)},d,d.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e,n,r,a){i(this,t),this.uuid=e,this.x_series_length=n,this.update_callback=r,this.context=a,this.play_enabled=!1,this.pan_zoom_enabled=!1,this.slider_moving=!1,this.current_x=0,this.target_x=0,this.play_speed=1,this.max_speed=8,this.min_speed=1,this.speed_mult=2,this.bbox_zoom=null,this.svg_container_sel=d3.select("#"+this.uuid+" .svg-container"),this.svg_sel=d3.select("#"+this.uuid+" #ssv-svg"),this.zoom_layer_sel=d3.select("#"+this.uuid+" #zoom-layer"),this.info_layer_sel=d3.select("#"+this.uuid+" #info-layer"),this.speed_btn_sel=d3.select("#"+this.uuid+" #speed-button"),this.play_btn_sel=d3.select("#"+this.uuid+" #play-button"),this.pan_zoom_btn_sel=d3.select("#"+this.uuid+" #pan-zoom-button"),this.center_btn_sel=d3.select("#"+this.uuid+" #center-button"),this.save_btn_sel=d3.select("#"+this.uuid+" #save-button"),this.modebar_sel=d3.select("#"+this.uuid+" .modebar"),this.modebar_group_sel=d3.select("#"+this.uuid+" .modebar-group"),this.modebar_slider_sel=d3.select("#"+this.uuid+" .modebar-slider"),this.pause_icon_sel=d3.select("#"+this.uuid+" #pause-icon"),this.play_icon_sel=d3.select("#"+this.uuid+" #play-icon"),this.pan_zoom_enabled_icon_sel=d3.select("#"+this.uuid+" #pan-zoom-enabled-icon"),this.pan_zoom_disabled_icon_sel=d3.select("#"+this.uuid+" #pan-zoom-disabled-icon"),this.initialize()}return r(t,[{key:"render_slider",value:function(){var t=this.modebar_sel.node().getBoundingClientRect(),e=t.height,n=2,i=8,r=t.width-this.modebar_group_sel.node().getBoundingClientRect().width,a=d3.scaleLinear().domain([0,this.x_series_length-1]).range([0,r-2*(n+i)]).clamp(!0);this.modebar_slider_sel.selectAll("svg").remove();var s=this.modebar_slider_sel.append("svg").attr("width",r).append("g").attr("transform","translate("+(i+n).toString()+","+(e/2+n).toString()+")"),o=this;s.append("line").attr("class","slider-track").attr("x1",a.range()[0]).attr("x2",a.range()[1]).select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","slider-inset").select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","slider-overlay").call(d3.drag().on("start.interrupt",function(){s.interrupt()}).on("start drag",function(){o.target_x=Math.round(a.invert(d3.event.x)),o.move()}));var l=s.append("circle").attr("class","slider-handle").attr("r",i);this.slider_dispatch=d3.dispatch("change"),this.slider_dispatch.on("change",function(){l.attr("cx",a(o.target_x))})}},{key:"play",value:function(){this.play_enabled?(this.play_enabled=!1,this.pause_icon_sel.attr("style","display:none"),this.play_icon_sel.attr("style","")):(this.play_enabled=!0,this.pause_icon_sel.attr("style",""),this.play_icon_sel.attr("style","display:none"),this.current_x>=this.x_series_length-1&&(this.current_x=0),this.x_series_forward())}},{key:"toggle_pan_zoom",value:function(){this.pan_zoom_enabled?(this.pan_zoom_enabled=!1,this.pan_zoom_disabled_icon_sel.attr("style",""),this.pan_zoom_enabled_icon_sel.attr("style","display:none")):(this.pan_zoom_enabled=!0,this.pan_zoom_disabled_icon_sel.attr("style","display:none"),this.pan_zoom_enabled_icon_sel.attr("style",""))}},{key:"move",value:function(){if(this.slider_dispatch.call("change"),!this.slider_moving){this.slider_moving=!0,this.current_x=this.target_x,this.update_callback.call(this.context,this.current_x);var t=this;d3.timer(function(){t.slider_moving=!1},500)}}},{key:"x_series_forward",value:function(){var t=this;window.setTimeout(function(){t.play_enabled&&t.current_x<t.x_series_length-1&&(t.target_x=t.current_x+1,t.move(),t.current_x<t.x_series_length-1?t.x_series_forward():t.play())},1e3/this.play_speed)}},{key:"initialize",value:function(){this.render_slider(),this.update_viewbox();var t=this;d3.select(window).on("resize",function(){t.render_slider(),t.update_viewbox()}),this.play_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.play()}),this.pan_zoom_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.toggle_pan_zoom()}),this.speed_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.play_speed==t.max_speed?t.play_speed=t.min_speed:t.play_speed*=t.speed_mult;var e=t.play_speed.toString();t.speed_btn_sel.select("span").html("<b>"+e+"x</b>")}),this.initialize_pan_zoom(),this.save_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.to_image()})}},{key:"initialize_pan_zoom",value:function(){var t=this.info_layer_sel.node().getBBox(),e=[t.x,t.y],n=this,i=d3.zoom().scaleExtent([1,8]).on("zoom",function(){if(n.pan_zoom_enabled){var i=d3.event.transform.k,r=0,a=0;t.width*i<=n.bbox_zoom.width?(r=Math.max(d3.event.transform.x,n.bbox_zoom.x-t.x-e[0]*(i-1)),r=Math.min(r,n.bbox_zoom.width-(t.x-n.bbox_zoom.x+e[0]*(i-1))-t.width*i)):(r=Math.max(d3.event.transform.x,n.bbox_zoom.x-t.x-(t.width*i-n.bbox_zoom.width)-e[0]*(i-1)),r=Math.min(r,t.x-e[0]*(i-1)-n.bbox_zoom.x)),t.height*i<=n.bbox_zoom.height?(a=Math.max(d3.event.transform.y,n.bbox_zoom.y-t.y-e[1]*(i-1)),a=Math.min(a,n.bbox_zoom.height-(t.y-n.bbox_zoom.y+e[1]*(i-1))-t.height*i)):(a=Math.max(d3.event.transform.y,n.bbox_zoom.y-t.y-(t.height*i-n.bbox_zoom.height)-e[1]*(i-1)),a=Math.min(a,t.y-e[1]*(i-1)-n.bbox_zoom.y)),n.info_layer_sel.attr("transform","translate("+[r,a]+")scale("+i+")"),d3.event.transform.x=r,d3.event.transform.y=a}});this.svg_sel.call(i),this.center_btn_sel.attr("ssv-id",this.uuid).on("click",function(){n.info_layer_sel.attr("transform","translate("+[t.x,t.y]+")scale(1)"),i.transform(n.svg_sel,d3.zoomIdentity)})}},{key:"update_viewbox",value:function(){var t=this.svg_container_sel.node().getBoundingClientRect(),e=this.svg_sel.attr("viewBox").split(" ").map(function(t){return parseFloat(t)}),n=.05*e[3],i=e[3]/t.height,r=t.width*i-e[2];e[2]=e[2]+r,e[0]=e[0]-r/2,this.svg_sel.attr("viewBox",e.join(" ")),this.zoom_layer_sel.attr("x",e[0]+n).attr("width",e[2]-2*n).attr("y",e[1]+n).attr("height",e[3]-2*n).style("fill","none"),this.bbox_zoom=this.zoom_layer_sel.node().getBBox()}},{key:"to_image",value:function(){var t='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',e=(new XMLSerializer).serializeToString(this.svg_sel.node()),n=new Blob([t+e],{type:"image/svg+xml;charset=utf-8"}),i=window.URL.createObjectURL(n),r=d3.select("body").append("img").attr("width",930).attr("height",340).node();r.onload=function(){var t=d3.select("body").append("canvas").node();t.width=3732,t.height=1360;var e=t.getContext("2d");e.drawImage(r,0,0),e.scale(2,2);var n=t.toDataURL(),i=document.createElement("a");i.download="sample.jpeg",i.href=n,i.click()},r.src=i,r.remove()}}]),t}();e.exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(a,[null].concat(e)))}},{}],2:[function(t,e,n){"use strict";function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return new m[e.type](t,e.ids,e.description,e.conditions,e.report_id,e.popover,n)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("./ssv_renderers.es6"),c=function(){function t(e,n,i,r,s,o,l){a(this,t),this.uuid=e,this.selectors=[],n&&(this.ids=n,this.selectors=n.map(function(t){return d3.select("#"+e+" #"+t)})),this.update_functions=[],this.report_sel=d3.select("#"+e+" #"+s),this.popover_div_sel=d3.select("#"+e+" .popover-spacer"),this.description=i,this.conditions=r,this.popover=o,this.font_scale=l,this.patterns_initialized=!1,this.gen_color_scales(),this.initialize()}return o(t,[{key:"gen_color_scales",value:function(){this.conditions.map(function(t){if("color_scale"in t&&"color_levels"in t){var e=t.color_scale,n=t.color_levels;t.color_scale=d3.scaleQuantile().domain([d3.min(n),d3.max(n)]).range(e)}})}},{key:"initialize",value:function(){this.report_sel.empty()||this.update_functions.push(l.render_report(this.report_sel.node(),this.font_scale,this.conditions,this.description)),this.popover&&this.update_functions.push(l.render_popover(this.popover_div_sel,this.selectors,this.popover,this.font_scale)),this.initialize_hook(),delete this.conditions}},{key:"initialize_hook",value:function(){}},{key:"update",value:function(t){this.update_functions&&this.update_functions.map(function(e){"function"==typeof e&&e(t)})}}]),t}(),d=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_hook",value:function(){var t=this;t.selectors.map(function(e,n){var i="pattern_"+t.ids[n];if(!t.patterns_initialized){var r=[];t.conditions.map(function(t){var e,n=1.01;if(e="overlay"in t?t.overlay:null,"background"==t.type)r.push(t.data.map(function(i){return[n,t.color_scale(i),t.opacity,e]}));else if("levelstatic"==t.type)r.push(t.data.map(function(n){var i=(Math.min((n-t.min_height)/(t.max_height-t.min_height)),1);return[i,t.color,t.opacity,e]}));else if("dynamiclevel"==t.type)r.push(t.data.map(function(n,i){var r=Math.min((n-t.min_height)/(t.max_height-t.min_height),1),a=t.color_scale(t.data_dynamic[i]);return[r,a,t.opacity,e]}));else if("logical"==t.type)r.push(t.data.map(function(i){var r;return r=i?t.true_color:t.false_color,[n,r,t.opacity,e]}));else if("zonaly"==t.type){var i=[];i=i.concat(t.data.map(function(n,i){return n.map(function(n,r){var a=Math.min((n-t.min_height)/(t.max_height-t.min_height),1),s=t.color_scale(t.data_dynamic[i][r]);return[a,s,t.opacity,e]})})),r=r.concat(d3.zip.apply(this,i))}}),r=d3.zip.apply(this,r),e.each(function(){t.update_functions.push(l.render_pattern(this,i,r,"fill"))})}})}}]),e}(c),u=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_hook",value:function(){var t=this;t.selectors.map(function(e,n){var i="pattern_"+t.ids[n],r=[];t.patterns_initialized||(t.conditions.map(function(t){var e,e=(t.opacity,null);if("equaly"==t.type){var n=[],n=n.concat(t.data.map(function(n){return n.map(function(i,r){var a=r/n.length,s=t.color_scale(i);return[a,s,t.opacity,e]})}));r=r.concat(d3.zip.apply(this,n))}}),r=d3.zip.apply(this,r),e.each(function(){t.update_functions.push(l.render_pattern(this,i,r,"stroke"))}))})}}]),e}(c),h=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_hook",value:function(){var t=this.conditions[0].data,e=this.conditions[0].color_scale,n=this.opacity,i=this;i.selectors.map(function(r){r.each(function(){i.update_functions.push(l.render_rect_heatmap(this,t,e,n))})})}}]),e}(c),p=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_hook",value:function(){var t=this;t.selectors.map(function(e){if("showhide"==t.conditions[0].type){var n=t.conditions[0].data;e.datum(n);var i=function(t){n[t]||n[t]>0?e.transition().attr("opacity",1):e.transition().attr("opacity",0)};t.update_functions.push(i)}})}}]),e}(c),f=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),e}(c),_=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize",value:function(){var t=this.report_sel.node(),e="table_"+this.report_id,n=this.conditions[0].data,i=this.conditions[0].headers;this.update_functions.push(l.render_table(t,e,n,i,this.font_scale))}}]),e}(c),y=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize",value:function(){var t=this.conditions[0].color_scale,e=this.report_sel.node(),n=this.conditions[0].opacity;l.render_color_scale(e,t,this.description,n,this.font_scale)}}]),e}(c),m={cell:d,line:u,heatmap:h,toggle:p,report:f,table:_,legend:y};e.exports=s},{"./ssv_renderers.es6":4}],3:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("./ssv_controls.es6"),s=t("./ssv_elements.es6"),o=t("./ssv_utilities.es6"),l=function(){function t(e,n,r,s,o){i(this,t),this.uuid=e,this.svg_sel=d3.select("#"+this.uuid+" #ssv-svg"),this.popover_div_sel=d3.select("#"+e+" .popover-spacer"),this.info_layer_sel=d3.select("#"+this.uuid+" #info-layer"),this.svg_container_sel=d3.select("#"+this.uuid+" .ssv-visual"),this.x_val_sel=d3.select("#"+this.uuid+" #x-series-val"),this.svg_container_sel.style("font-size",o.toString()+"px"),this.x_series=n,this.elements=[],this.svg_overlays=s,this.initialize_overlays(),this.set_font_scale(),this.initialize_elements(r),a(e,n.length,this.update_elements,this)}return r(t,[{key:"initialize_overlays",value:function(){this.svg_sel.select("defs").empty()&&this.svg_sel.append("defs");for(var t in this.svg_overlays)this.svg_sel.select("defs").html(this.svg_sel.select("defs").html()+this.svg_overlays[t])}},{key:"set_font_scale",value:function(){var t=parseFloat(this.svg_sel.attr("viewBox").split(" ")[3])/this.svg_container_sel.node().getBoundingClientRect().height;this.font_scale=t,this.svg_sel.attr("font-scale",t)}},{key:"initialize_elements",value:function(t){var e=this.uuid,n=this.font_scale;this.elements=t.map(function(t){return s(e,t,n)}),this.update_elements(0)}},{key:"update_elements",value:function(t){this.x_val_sel.html(o.num_format(this.x_series[t])),this.elements.map(function(e){e.update(t)})}}]),t}();window.onerror=function(t){d3.select("body").attr("JSError",t)};var c={};e.exports={add_element_context:function(t,e,n,i,r){c[t]=new l(t,e,n,i,r)}}},{"./ssv_controls.es6":1,"./ssv_elements.es6":2,"./ssv_utilities.es6":5}],4:[function(t,e,n){"use strict";function i(t,e,n,i){if(t){var r=d3.select(t.parentNode),a=t.getBBox(),s=a.width,o=a.x,l=a.y,c=1.2,u=1,h=.1,p="#FFC107",f="#00BFA5",_="#FFFFFF",y="#FFFFFF",m="#FFEB3B",v="#616161",g="Sizing...";d3.select(t).style("visibility","hidden");var x=r.append("g").attr("transform","translate("+o+","+l+")").append("g").attr("id","ssv-report").attr("font-size",e.toString()+"em"),b=x.append("rect").attr("width",s).attr("fill",v).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge"),w=x.append("text").attr("width",s).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("x",s/2).attr("fill",p).style("font-size",c.toString()+"em").text(g),z=w.node().getBBox().height;w.attr("y",z*(1+h));var k=z*u/c,F=z*(1+2*h);b.attr("height",F);var B=k*(1+1*h),O=B+k*h;w.text(i);for(var S=0;S<n.length;S++){var j=n[S];if("report"in j&&j.report){var A=j.data,E=1;A[0].constructor===Array&&(E=A[0].length),x.append("rect").attr("width",s).attr("fill",v).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("y",F).attr("height",(E+1)*O),x.append("text").attr("width",s).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",s/2).attr("y",F+B).attr("fill",f).style("font-size",u.toString()+"em").attr("font-style","oblique").text(j.description);var C;C="section_label"in j&&""!=j.section_label?j.section_label:"Section",F+=O;for(var M=0;M<E;M++){var P;P=E>1?3:2,E>1&&x.append("text").attr("width",s).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",s/(2*P)).attr("y",F+B).attr("fill",_).style("font-size",u.toString()+"em").text(C+" #"+(M+1).toString());var N;N=E>1?A.map(function(t){return d(t[M])}):A.map(function(t){return d(t)}),x.append("text").attr("width",s).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("class","value-text").datum(N).attr("x",s/(2*(4-P))).attr("y",F+B).attr("fill",m).style("font-size",u.toString()+"em"),x.append("text").attr("width",s).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",(2*P-1)*s/(2*P)).attr("y",F+B).attr("fill",y).style("font-size",u.toString()+"em").text(j.unit),F+=O}}}}var L=function(t){r.selectAll(".value-text").text(function(e){return e[t]})};return L}function r(t,e,n,i){var r=d3.select(t.parentNode);r.select("defs").empty()&&r.append("defs");var a=t.getBBox().height;n[0].length>1&&(n=n.map(function(t){return t.sort(function(t,e){return-(t[0]-e[0])})}));var n=n.map(function(t){return t.map(function(t){var e=Math.max(0,1-t[0])*a;return[e].concat(t.slice(1,t.length))})}),s=r.select("defs"),o=s.append("pattern").attr("id",e).attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("patternContentUnits","userSpaceOnUse").datum(n),l=o.selectAll().data(function(t){return t[0]}).enter();l.each(function(){o.append("rect").attr("id","base").attr("x","0").attr("width","100%").attr("height","100%"),o.append("rect").attr("id","transition").attr("x","0").attr("width","100%").attr("height","1px").attr("fill","#FFFFFF"),o.append("rect").attr("id","overlay").attr("x","0").attr("width","100%").attr("height","100%")});var c=d3.select(t);"fill"==i?c.style("fill","url(#"+e+")"):c.style("stroke","url(#"+e+")"),c.style("fill-opacity",1),c.style("opacity",1);var d=function(t){o.selectAll("#base").data(function(e){return e[t]}).transition().attr("y",function(t){return t[0]}).style("fill",function(t){return t[1]}).style("opacity",function(t){return t[2]}),o.selectAll("#transition").data(function(e){return e[t]}).transition().attr("y",function(t){return t[0]>0?t[0]:"-1%"}).style("opacity",function(t){return t[2]}),o.selectAll("#overlay").data(function(e){return e[t]}).transition().attr("fill",function(t){return null==t[3]?"none":"url(#"+t[3]+")"}).attr("y",function(t){return t[0]}).style("opacity",function(t){return t[2]})};return d}function a(t,e,n,i){if(t){var r=d3.select(t.parentNode),a=t.getBBox(),s=d3.scaleLinear().domain([0,e[0][0].length]).range([0,a.width]),o=d3.scaleLinear().domain([0,e[0].length]).range([0,a.height]),l=r.append("g").attr("transform","translate("+a.x+","+a.y+")").append("g"),c=e.map(function(t){return t.map(function(t){return t.map(function(t){return n(t)})})});l.data([c]);var d=l.selectAll().data(function(t){return t[0]}).enter().append("g").attr("class","x_section").attr("stroke","black").attr("stroke-width","1px");d.selectAll(".bin").data(function(t){return t}).enter().append("rect").attr("class","bin").attr("x",function(t,e){return s(e)}).attr("width",function(t,e){return s(e+1)-s(e)}).style("fill",function(t){return t}).style("fill-opacity",function(){return i}).attr("height",a.height/e[0].length),d.each(function(t,e){d3.select(this).selectAll(".bin").attr("y",o(e))});var u=function(t){var e=r.select("g").select("g"),n=e.selectAll(".x_section").data(function(e){return e[t]});n.selectAll(".bin").data(function(t){return t}).transition().style("fill",function(t){return t})};return u}}function s(t,e,n,i,r){if(t){var a=d3.select(t.parentNode),s=t.getBBox(),o=s.width,l=s.x,c=s.y;d3.select(t).style("visibility","hidden");var d=a.append("g").attr("transform","translate("+l+","+c+")").append("foreignObject").attr("id","ssv-table").attr("width",o).attr("height",500).append("xhtml:table").attr("class","table").attr("id",e).datum(n);d.append("thead").append("tr").selectAll().data(i).enter().append("th").text(function(t){return t}).style("font-size",r.toString()+"em"),d.append("tbody");var u=function(t){var e=d.selectAll(".content-row").data(function(e){return e[t]});e.exit().remove(),e.enter().append("tr").merge(e).attr("class","content-row");var n=d.selectAll(".content-row").selectAll(".content-cell").data(function(t){return t});n.exit().remove(),n.enter().append("td").merge(n).text(function(t){return t}).style("font-size",r.toString()+"em").attr("class","content-cell")};return u}}function o(t,e,n,i,r){if(t){var a=d3.select(t.parentNode);d3.select(t).style("visibility","hidden");var s=t.getBBox(),o=s.width,l=s.x,c=s.y,a=d3.select(t.parentNode),d=a.append("g").attr("transform","translate("+l+","+c+")").append("g").attr("font-size",r+"em").attr("stroke","black").attr("stroke-width","0.01em"),u=e.range().length,h=d3.scaleLinear().domain([0,u]).range([0,o]),p=1.5,f=1,_=.1,y=d.append("text").text(n).attr("x",o/2).attr("y","1em").attr("text-anchor","middle").attr("font-size",p.toString()+"em"),m=y.node().getBBox().height,v=d.selectAll("rect").data(e.range());v.enter().append("rect").attr("x",function(t,e){return h(e)}).attr("y",(1+_)*m).attr("width",function(t,e){return h(e+1)-h(e)}).attr("height",m).attr("fill",function(t){return t}).style("fill-opacity",i).attr("font-size",p.toString()+"em"),v.enter().append("text").text(function(t){return e.invertExtent(t)[0].toFixed(0)}).attr("x",function(t,e){return h(e)}).attr("y",m*(2+_+f/p*(1+_))).attr("text-anchor","middle").attr("font-size",f.toString()+"em")}}function l(t,e,n,i){var r=t.append("div").style("background","#9E9E9E"),a=[150,50];"dims"in n&&(a=n.dims);var s=r.append("svg").attr("width",a[0]+"px").attr("height",a[1]+"px").style("font-size",i.toString()+"em").append("g");if(r.attr("class","ssv-popover").style("visibility","hidden"),"sparkline"==n.type)var o=c(s,a,n.x_series,n.data,n.label);return e.map(function(t){t.on("mouseover",function(){r.style("visibility","visible")}),t.on("mousemove",function(){r.style("top",d3.event.pageY+"px").style("left",d3.event.pageX+"px")}),t.on("mouseout",function(){r.style("visibility","hidden")})}),o}function c(t,e,n,i,r){var a=e[0],s=e[1],o=.05*a,l=o,c=d3.line().x(function(t,e){return h(e)}).y(function(t){return p(t)});if(r){var d=t.append("text").attr("x",o).attr("y","1.05em").attr("fill","#FFFFFF").text(r),u=d.node().getBBox();l+=2*u.y+u.height}var h=d3.scaleLinear().range([0,a-2*o]),p=d3.scaleLinear().range([s-l-o,0]),f=t.append("g").attr("transform","translate("+o+","+l+")");h.domain([0,n.length]),p.domain([d3.min(i),d3.max(i)]),f.append("path").style("fill","none").style("stroke","#FFFFFF").style("stroke-width","0.1em").attr("d",c(i));var _=f.append("circle").attr("r","0.5em").attr("fill","orange"),y=function(t){_.transition().attr("cx",h(t)).attr("cy",p(i[t]))};return y}var d=t("./ssv_utilities.es6").num_format;e.exports={render_report:i,render_pattern:r,render_color_scale:o,render_table:s,render_rect_heatmap:a,render_popover:l}},{"./ssv_utilities.es6":5}],5:[function(t,e,n){"use strict";function i(t){return t>=1e3||t<.01?d3.format(".2e")(t):d3.format(".2f")(t)}e.exports={num_format:i}},{}]},{},[3])(3)});
//# sourceMappingURL=maps/ssv.min.js.map
