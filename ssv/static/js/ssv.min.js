!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ssv=t()}}(function(){return function t(e,i,n){function r(s,o){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[s]={exports:{}};e[s][0].call(d.exports,function(t){var i=e[s][1][t];return r(i?i:t)},d,d.exports,t,e,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e,i,r,a){n(this,t),this.uuid=e,this.x_series_length=i,this.update_callback=r,this.context=a,this.play_enabled=!1,this.pan_zoom_enabled=!0,this.slider_moving=!1,this.current_x=0,this.target_x=0,this.play_speed=1,this.max_speed=8,this.min_speed=1,this.speed_mult=2,this.bbox_zoom=null,this.bbox_info=null,this.svg_container_sel=d3.select("#"+this.uuid+" .svg-container"),this.svg_sel=d3.select("#"+this.uuid+" #ssv-svg"),this.zoom_layer_sel=d3.select("#"+this.uuid+" #zoom-layer"),this.info_layer_sel=d3.select("#"+this.uuid+" #info-layer"),this.speed_btn_sel=d3.select("#"+this.uuid+" #speed-button"),this.play_btn_sel=d3.select("#"+this.uuid+" #play-button"),this.pan_zoom_btn_sel=d3.select("#"+this.uuid+" #pan-zoom-button"),this.center_btn_sel=d3.select("#"+this.uuid+" #center-button"),this.modebar_sel=d3.select("#"+this.uuid+" .modebar"),this.modebar_group_sel=d3.select("#"+this.uuid+" .modebar-group"),this.modebar_slider_sel=d3.select("#"+this.uuid+" .modebar-slider"),this.pause_icon_sel=d3.select("#"+this.uuid+" #pause-icon"),this.play_icon_sel=d3.select("#"+this.uuid+" #play-icon"),this.pan_zoom_enabled_icon_sel=d3.select("#"+this.uuid+" #pan-zoom-enabled-icon"),this.pan_zoom_disabled_icon_sel=d3.select("#"+this.uuid+" #pan-zoom-disabled-icon"),this.initialize()}return r(t,[{key:"render_slider",value:function(){var t=this.modebar_sel.node().getBoundingClientRect(),e=t.height,i=2,n=8,r=t.width-this.modebar_group_sel.node().getBoundingClientRect().width,a=d3.scaleLinear().domain([0,this.x_series_length-1]).range([0,r-2*(i+n)]).clamp(!0);this.modebar_slider_sel.selectAll("svg").remove();var s=this.modebar_slider_sel.append("svg").attr("width",r).append("g").attr("transform","translate("+(n+i).toString()+","+(e/2+i).toString()+")"),o=this;s.append("line").attr("class","slider-track").attr("x1",a.range()[0]).attr("x2",a.range()[1]).select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","slider-inset").select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","slider-overlay").call(d3.drag().on("start.interrupt",function(){s.interrupt()}).on("start drag",function(){o.target_x=Math.round(a.invert(d3.event.x)),o.move()}));var l=s.append("circle").attr("class","slider-handle").attr("r",n);this.slider_dispatch=d3.dispatch("change"),this.slider_dispatch.on("change",function(){l.attr("cx",a(o.target_x))})}},{key:"play",value:function(){this.play_enabled?(this.play_enabled=!1,this.pause_icon_sel.attr("style","display:none"),this.play_icon_sel.attr("style","")):(this.play_enabled=!0,this.pause_icon_sel.attr("style",""),this.play_icon_sel.attr("style","display:none"),this.current_x>=this.x_series_length-1&&(this.current_x=0),this.x_series_forward())}},{key:"toggle_pan_zoom",value:function(){this.pan_zoom_enabled?(this.pan_zoom_enabled=!1,this.pan_zoom_disabled_icon_sel.attr("style",""),this.pan_zoom_enabled_icon_sel.attr("style","display:none")):(this.pan_zoom_enabled=!0,this.pan_zoom_disabled_icon_sel.attr("style","display:none"),this.pan_zoom_enabled_icon_sel.attr("style",""))}},{key:"move",value:function(){if(this.slider_dispatch.call("change"),!this.slider_moving){this.slider_moving=!0,this.current_x=this.target_x,this.update_callback.call(this.context,this.current_x);var t=this;d3.timer(function(){t.slider_moving=!1},100)}}},{key:"x_series_forward",value:function(){var t=this;window.setTimeout(function(){t.play_enabled&&t.current_x<t.x_series_length-1&&(t.target_x=t.current_x+1,t.move(),t.current_x<t.x_series_length-1?t.x_series_forward():t.play())},1e3/this.play_speed)}},{key:"initialize",value:function(){this.render_slider(),this.update_viewbox();var t=this;d3.select(window).on("resize",function(){t.render_slider(),t.update_viewbox()}),this.play_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.play()}),this.pan_zoom_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.toggle_pan_zoom()}),this.speed_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.play_speed==t.max_speed?t.play_speed=t.min_speed:t.play_speed*=t.speed_mult;var e=t.play_speed.toString();t.speed_btn_sel.select("span").html("<b>"+e+"x</b>")}),this.initialize_pan_zoom()}},{key:"initialize_pan_zoom",value:function(){var t=this.info_layer_sel.node().getBBox(),e=[t.x-0,t.y-0],i=this,n=d3.zoom().scaleExtent([1,8]).on("zoom",function(){if(i.pan_zoom_enabled){var n=d3.event.transform.k,r=0,a=0;t.width*n<=i.bbox_zoom.width?(r=Math.max(d3.event.transform.x,i.bbox_zoom.x-t.x-e[0]*(n-1)),r=Math.min(r,i.bbox_zoom.width-(t.x-i.bbox_zoom.x+e[0]*(n-1))-t.width*n)):(r=Math.max(d3.event.transform.x,i.bbox_zoom.x-t.x-(t.width*n-i.bbox_zoom.width)-e[0]*(n-1)),r=Math.min(r,t.x-e[0]*(n-1)-i.bbox_zoom.x)),t.height*n<=i.bbox_zoom.height?(a=Math.max(d3.event.transform.y,i.bbox_zoom.y-t.y-e[1]*(n-1)),a=Math.min(a,i.bbox_zoom.height-(t.y-i.bbox_zoom.y+e[1]*(n-1))-t.height*n)):(a=Math.max(d3.event.transform.y,i.bbox_zoom.y-t.y-(t.height*n-i.bbox_zoom.height)-e[1]*(n-1)),a=Math.min(a,t.y-e[1]*(n-1)-i.bbox_zoom.y)),i.info_layer_sel.attr("transform","translate("+[r,a]+")scale("+n+")"),d3.event.transform.x=r,d3.event.transform.y=a}});this.zoom_layer_sel.call(n),this.center_btn_sel.attr("ssv-id",this.uuid).on("click",function(){i.info_layer_sel.attr("transform","translate("+[t.x,t.y]+")scale(1)"),n.transform(i.zoom_layer_sel,d3.zoomIdentity)})}},{key:"update_viewbox",value:function(){var t=this.svg_container_sel.node().getBoundingClientRect(),e=this.svg_sel.attr("viewBox").split(" ").map(function(t){return parseFloat(t)}),i=.05*e[3],n=e[3]/t.height,r=t.width*n-e[2];e[2]=e[2]+r,e[0]=e[0]-r/2,this.svg_sel.attr("viewBox",e.join(" ")),this.zoom_layer_sel.attr("x",e[0]+i).attr("width",e[2]-2*i).attr("y",e[1]+i).attr("height",e[3]-2*i),this.bbox_zoom=this.zoom_layer_sel.node().getBBox()}}]),t}();e.exports=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new(Function.prototype.bind.apply(a,[null].concat(e)))}},{}],2:[function(t,e,i){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return new m[e.type](t,e.ids,e.description,e.conditions,e.report_id)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=t("./ssv_utilities.es6"),c=function(){function t(e,i,n,r,s){a(this,t),this.uuid=e,this.svg_selector="#"+this.uuid+" #ssv-svg",this.ids=i,this.selectors=[];for(var o in this.ids)this.selectors.push("#"+this.uuid+" #"+this.ids[o]);this.report_id=s,this.report_selector="#"+this.uuid+" #"+this.report_id,this.description=n,this.conditions=r,this.patterns_initialized=!1,this.report_initialized=!1,this.initialize_color_scales()}return o(t,[{key:"initialize_color_scales",value:function(){this.conditions.map(function(t){if("color_scale"in t&&"color_levels"in t){var e=t.color_scale,i=t.color_levels;t.color_scale=d3.scaleQuantile().domain([d3.min(i),d3.max(i)]).range(e)}})}},{key:"initialize_report",value:function(){var t=d3.select(this.report_selector),e=d3.select(t.node().parentNode);if(!t.empty()){var i=t.node().getBBox(),n=i.width,r=i.x,a=i.y,s=1.2,o=1,c=.1,d="#FFC107",u="#00BFA5",h="#FFFFFF",p="#FFFFFF",_="#FFEB3B",f="#616161",y="Sizing...";t.style("visibility","hidden");var m=d3.select(this.svg_selector).attr("font-scale"),v=e.append("g").attr("transform","translate("+r+","+a+")").append("g").attr("id","ssv-report").attr("font-size",m.toString()+"em"),g=v.append("rect").attr("width",n).attr("fill",f).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge"),x=v.append("text").attr("width",n).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",n/2).attr("fill",d).style("font-size",s.toString()+"em").text(y),b=x.node().getBBox().height;x.attr("y",b*(1+c));var z=b*o/s,w=b*(1+2*c);g.attr("height",w);var k=z*(1+1*c),B=k+z*c;x.text(this.description);for(var F=0;F<this.conditions.length;F++){var O=this.conditions[F];if("report"in O&&O.report){var A=O.data,S=1;A[0].constructor===Array&&(S=A[0].length),v.append("rect").attr("width",n).attr("fill",f).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("y",w).attr("height",(S+1)*B),v.append("text").attr("width",n).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",n/2).attr("y",w+k).attr("fill",u).style("font-size",o.toString()+"em").attr("font-style","oblique").text(O.description);var j;j="section_label"in O&&""!=O.section_label?O.section_label:"Section",w+=B;for(var M=0;M<S;M++){var N;N=S>1?3:2,S>1&&v.append("text").attr("width",n).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",n/(2*N)).attr("y",w+k).attr("fill",h).style("font-size",o.toString()+"em").text(j+" #"+(M+1).toString());var C;C=S>1?A.map(function(t){return l(t[M])}):A.map(function(t){return l(t)}),v.append("text").attr("width",n).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("class","value-text").datum(C).attr("x",n/(2*(4-N))).attr("y",w+k).attr("fill",_).style("font-size",o.toString()+"em"),v.append("text").attr("width",n).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",(2*N-1)*n/(2*N)).attr("y",w+k).attr("fill",p).style("font-size",o.toString()+"em").text(O.unit),w+=B}}}}this.report_initialized=!0}},{key:"update_report",value:function(t){this.report_initialized||this.initialize_report();var e=d3.select(d3.select(this.report_selector).node().parentNode);e.selectAll(".value-text").text(function(e){return e[t]})}},{key:"initialize_pattern",value:function(t,e,i,n){var r=d3.select(this.svg_selector);r.select("defs").empty()&&r.append("defs");var a=t.getBBox().height;i[0].length>1&&(i=i.map(function(t){return t.sort(function(t,e){return-(t[0]-e[0])})}));var i=i.map(function(t){return t.map(function(t){var e=Math.max(0,1-t[0])*a;return[e].concat(t.slice(1,t.length))})}),s=d3.select("#"+this.uuid+" svg defs"),o=s.append("pattern").attr("id",e).attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("patternContentUnits","userSpaceOnUse").datum(i),l=o.selectAll().data(function(t){return t[0]}).enter();l.each(function(){o.append("rect").attr("id","base").attr("x","0").attr("width","100%").attr("height","100%"),o.append("rect").attr("id","transition").attr("x","0").attr("width","100%").attr("height","1px").attr("fill","#FFFFFF"),o.append("rect").attr("id","overlay").attr("x","0").attr("width","100%").attr("height","100%")});var c=d3.select(t);"fill"==n?c.style("fill","url(#"+e+")"):c.style("stroke","url(#"+e+")"),c.style("fill-opacity",1),c.style("opacity",1)}},{key:"update_pattern",value:function(t,e,i){var n=d3.select("#"+this.uuid+" #"+i);n.selectAll("#base").data(function(e){return e[t]}).transition().attr("y",function(t){return t[0]}).style("fill",function(t){return t[1]}).style("opacity",function(t){return t[2]}),n.selectAll("#transition").data(function(e){return e[t]}).transition().attr("y",function(t){return t[0]>0?t[0]:"-1%"}).style("opacity",function(t){return t[2]}),n.selectAll("#overlay").data(function(e){return e[t]}).transition().attr("fill",function(t){return null==t[3]?"none":"url(#"+t[3]+")"}).attr("y",function(t){return t[0]}).style("opacity",function(t){return t[2]})}}]),t}(),d=function(t){function e(t,i,r,s,o){return a(this,e),n(this,Object.getPrototypeOf(e).call(this,t,i,r,s,o))}return r(e,t),o(e,[{key:"update",value:function(t){var e=this;e.selectors.map(function(i,n){var r=d3.selectAll(i),a="pattern_"+e.ids[n];if(!e.patterns_initialized){var s=[];e.conditions.map(function(t){var e,i=1.01;if(e="overlay"in t?t.overlay:null,"background"==t.type)s.push(t.data.map(function(n){return[i,t.color_scale(n),t.opacity,e]}));else if("levelstatic"==t.type)s.push(t.data.map(function(i){var n=(Math.min((i-t.min_height)/(t.max_height-t.min_height)),1);return[n,t.color,t.opacity,e]}));else if("dynamiclevel"==t.type)s.push(t.data.map(function(i,n){var r=Math.min((i-t.min_height)/(t.max_height-t.min_height),1),a=t.color_scale(t.data_dynamic[n]);return[r,a,t.opacity,e]}));else if("logical"==t.type)s.push(t.data.map(function(n){var r;return r=n?t.true_color:t.false_color,[i,r,t.opacity,e]}));else if("zonaly"==t.type){var n=[];n=n.concat(t.data.map(function(i,n){return i.map(function(i,r){var a=Math.min((i-t.min_height)/(t.max_height-t.min_height),1),s=t.color_scale(t.data_dynamic[n][r]);return[a,s,t.opacity,e]})})),s=s.concat(d3.zip.apply(this,n))}}),s=d3.zip.apply(this,s),r.each(function(){e.initialize_pattern(this,a,s,"fill")})}r.each(function(){e.update_pattern(t,this,a)})}),e.patterns_initialized=!0,e.report_id&&e.update_report(t)}}]),e}(c),u=function(t){function e(t,i,r,s,o){return a(this,e),n(this,Object.getPrototypeOf(e).call(this,t,i,r,s,o))}return r(e,t),o(e,[{key:"update",value:function(t){var e=this;e.selectors.map(function(i,n){var r=d3.selectAll(i),a="pattern_"+e.ids[n],s=[];e.patterns_initialized||(e.conditions.map(function(t){var e,e=(t.opacity,null);if("equaly"==t.type){var i=[],i=i.concat(t.data.map(function(i){return i.map(function(n,r){var a=r/i.length,s=t.color_scale(n);return[a,s,t.opacity,e]})}));s=s.concat(d3.zip.apply(this,i))}}),s=d3.zip.apply(this,s),r.each(function(){e.initialize_pattern(this,a,s,"stroke")})),r.each(function(){e.update_pattern(t,this,a)})}),e.patterns_initialized=!0,e.report_id&&e.update_report(t)}}]),e}(c),h=function(t){function e(t,i,r,s,o){a(this,e);var l=n(this,Object.getPrototypeOf(e).call(this,t,i,r,s,o));return l.conditions[0].data[0].constructor==Array?l.conditions.num_sections=l.conditions[0].data[0].length:l.conditions[0].num_sections=1,l.initialize(),l}return r(e,t),o(e,[{key:"initialize",value:function(){var t=this.conditions[0].data[0],e=this;e.selectors.map(function(i){var n=d3.select(i),r=d3.select(n.node().parentNode),a=n.node().getBBox(),s=d3.scaleLinear().domain([0,t[0].length]).range([0,a.width]),o=d3.scaleLinear().domain([0,t.length]).range([0,a.height]),l=r.append("g").attr("transform","translate("+a.x+","+a.y+")").append("g"),c=e.conditions[0].color_scale,d=e.conditions[0].data.map(function(t){return t.map(function(t){return t.map(function(t){return c(t)})})});l.data([d]);var u=l.selectAll().data(function(t){return t[0]}).enter().append("g").attr("class","x_section").attr("stroke","black").attr("stroke-width","1px");u.selectAll(".bin").data(function(t){return t}).enter().append("rect").attr("class","bin").attr("x",function(t,e){return s(e)}).attr("width",function(t,e){return s(e+1)-s(e)}).style("fill",function(t){return t}).style("fill-opacity",function(t){return e.conditions[0].opacity}).attr("height",a.height/t.length),u.each(function(t,e){d3.select(this).selectAll(".bin").attr("y",o(e))})})}},{key:"update",value:function(t){var e=this;e.selectors.map(function(e){var i=d3.select(e),n=d3.select(i.node().parentNode),r=n.select("g").select("g"),a=r.selectAll(".x_section").data(function(e){return e[t]});a.selectAll(".bin").data(function(t){return t}).transition().style("fill",function(t){return t})}),e.report_id&&e.update_report(t)}}]),e}(c),p=function(t){function e(t,i,r,s,o){a(this,e);var l=n(this,Object.getPrototypeOf(e).call(this,t,i,r,s,o));return l.data_initialized=!1,l}return r(e,t),o(e,[{key:"update",value:function(t){var e=this;e.selectors.map(function(i){var n=d3.selectAll(i);e.data_initialized||"showhide"==e.conditions[0].type&&n.datum(e.conditions[0].data);var r=n.datum();r[t]||r[t]>0?n.transition().attr("opacity",1):n.transition().attr("opacity",0)}),e.data_initialized=!0,e.report_id&&e.update_report(t)}}]),e}(c),_=function(t){function e(t,i,r,s,o){return a(this,e),n(this,Object.getPrototypeOf(e).call(this,t,i,r,s,o))}return r(e,t),o(e,[{key:"update",value:function(t){this.report_id&&this.update_report(t)}}]),e}(c),f=function(t){function e(t,i,r,s,o){return a(this,e),n(this,Object.getPrototypeOf(e).call(this,t,i,r,s,o))}return r(e,t),o(e,[{key:"initialize_report",value:function(){var t=d3.select(this.report_selector),e=d3.select(t.node().parentNode);if(!t.empty()){var i=t.node().getBBox(),n=i.width,r=i.x,a=i.y,s="table_"+this.report_id;t.style("visibility","hidden");var o=d3.select(this.svg_selector).attr("font-scale"),l=e.append("g").attr("transform","translate("+r+","+a+")").append("foreignObject").attr("id","ssv-table").attr("width",n).attr("height",500).append("xhtml:table").attr("class","table").attr("id",s).datum(this.conditions[0].data);l.append("thead").append("tr").selectAll().data(this.conditions[0].headers).enter().append("th").text(function(t){return t}).style("font-size",o.toString()+"em")}l.append("tbody"),this.report_initialized=!0}},{key:"update_report",value:function(t){this.report_initialized||this.initialize_report();var e="table_"+this.report_id,i=d3.select(this.svg_selector).attr("font-scale"),n=d3.select("#"+this.uuid+" #"+e+" tbody"),r=n.selectAll(".content-row").data(function(e){return e[t]});r.exit().remove(),r.enter().append("tr").merge(r).attr("class","content-row");var a=n.selectAll(".content-row").selectAll(".content-cell").data(function(t){return t});a.exit().remove(),a.enter().append("td").merge(a).text(function(t){return t}).style("font-size",i.toString()+"em").attr("class","content-cell")}},{key:"update",value:function(t){this.report_id&&this.update_report(t)}}]),e}(c),y=function(t){function e(t,i,r,s,o){return a(this,e),n(this,Object.getPrototypeOf(e).call(this,t,i,r,s,o))}return r(e,t),o(e,[{key:"initialize_report",value:function(){var t=d3.select(this.report_selector),e=d3.select(t.node().parentNode),i=d3.select(this.svg_selector).attr("font-scale");if(!t.empty()){t.style("visibility","hidden");var n=t.node().getBBox(),r=n.width,a=n.x,s=n.y,e=d3.select(t.node().parentNode),o=e.append("g").attr("transform","translate("+a+","+s+")").append("g").attr("font-size",i+"em").attr("stroke","black").attr("stroke-width","0.01em"),l=this.conditions[0].color_scale,c=l.range().length,d=d3.scaleLinear().domain([0,c]).range([0,r]),u=1.5,h=1,p=.1,_=o.append("text").text(this.description).attr("x",r/2).attr("y","1em").attr("text-anchor","middle").attr("font-size",u.toString()+"em"),f=_.node().getBBox().height,y=o.selectAll("rect").data(l.range());y.enter().append("rect").attr("x",function(t,e){return d(e)}).attr("y",(1+p)*f).attr("width",function(t,e){return d(e+1)-d(e)}).attr("height",f).attr("fill",function(t){return t}).style("fill-opacity",this.conditions[0].opacity).attr("font-size",u.toString()+"em"),y.enter().append("text").text(function(t){return l.invertExtent(t)[0].toFixed(0)}).attr("x",function(t,e){return d(e)}).attr("y",f*(2+p+h/u*(1+p))).attr("text-anchor","middle").attr("font-size",h.toString()+"em")}this.report_initialized=!0}},{key:"update_report",value:function(t){this.report_initialized||this.initialize_report()}},{key:"update",value:function(t){this.report_id&&this.update_report(t)}}]),e}(c),m={cell:d,line:u,heatmap:h,toggle:p,report:_,table:f,legend:y};e.exports=s},{"./ssv_utilities.es6":4}],3:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("./ssv_controls.es6"),s=t("./ssv_elements.es6"),o=t("./ssv_utilities.es6"),l=function(){function t(e,i,r,s){n(this,t),this.uuid=e,this.svg_sel=d3.select("#"+this.uuid+" #ssv-svg"),this.svg_container_sel=d3.select("#"+this.uuid+" .ssv-visual"),this.x_val_sel=d3.select("#"+this.uuid+" #x-series-val"),this.x_series=i,this.elements=[],this.svg_overlays=s,this.initialize_overlays(),this.set_font_scale(),this.initialize_elements(r),a(e,i.length,this.update_elements,this)}return r(t,[{key:"initialize_overlays",value:function(){this.svg_sel.select("defs").empty()&&this.svg_sel.append("defs");for(var t in this.svg_overlays)this.svg_sel.select("defs").html(this.svg_sel.select("defs").html()+this.svg_overlays[t])}},{key:"set_font_scale",value:function(){var t=parseFloat(this.svg_sel.attr("viewBox").split(" ")[3])/this.svg_container_sel.node().getBoundingClientRect().height;this.font_scale=t,this.svg_sel.attr("font-scale",t)}},{key:"initialize_elements",value:function(t){var e=this.uuid;this.elements=t.map(function(t){return s(e,t)}),this.update_elements(0),this.elements.map(function(t){"conditions"in t&&delete t.conditions})}},{key:"update_elements",value:function(t){this.x_val_sel.html(o(this.x_series[t])),this.elements.map(function(e){e.update(t)})}}]),t}();window.onerror=function(t){d3.select("body").attr("JSError",t)};var c={};e.exports={add_element_context:function(t,e,i,n){c[t]=new l(t,e,i,n)}}},{"./ssv_controls.es6":1,"./ssv_elements.es6":2,"./ssv_utilities.es6":4}],4:[function(t,e,i){"use strict";function n(t){return t>=1e3||t<.01?d3.format(".2e")(t):d3.format(".2f")(t)}e.exports=n},{}]},{},[3])(3)});
//# sourceMappingURL=maps/ssv.min.js.map
