!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ssv=t()}}(function(){return function t(e,n,i){function r(a,o){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};e[a][0].call(d.exports,function(t){var n=e[a][1][t];return r(n?n:t)},d,d.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./ssv_utilities.es6"),a=function(){function t(e,n,r,s,a){i(this,t),this.uuid=uuid,this.title=e,this.x_series=n,this.x_series_unit=r,this.update_callback=s,this.context=a,this.sels=a.sels,this.play_enabled=!1,this.pan_zoom_enabled=!1,this.slider_moving=!1,this.current_x=0,this.target_x=0,this.play_speed=1,this.max_speed=8,this.min_speed=1,this.speed_mult=2,this.bbox_zoom=null,this.initialize()}return r(t,[{key:"render_slider",value:function(){var t=this.sels.controls.modebar.node().getBoundingClientRect(),e=t.height,n=2,i=8,r=t.width-this.sels.controls.modebar_group.node().getBoundingClientRect().width,s=d3.scaleLinear().domain([0,this.x_series.length-1]).range([0,r-2*(n+i)]).clamp(!0);this.sels.controls.modebar_slider.selectAll("svg").remove();var a=this.sels.controls.modebar_slider.append("svg").attr("width",r).append("g").attr("transform","translate("+(i+n).toString()+","+(e/2+n).toString()+")"),o=this;a.append("line").attr("class","slider-track").attr("x1",s.range()[0]).attr("x2",s.range()[1]).select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","slider-inset").select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","slider-overlay").call(d3.drag().on("start.interrupt",function(){a.interrupt()}).on("start drag",function(){o.target_x=Math.round(s.invert(d3.event.x)),o.move(250)}));var l=a.append("circle").attr("class","slider-handle").attr("r",i);this.slider_dispatch=d3.dispatch("change"),this.slider_dispatch.on("change",function(){l.attr("cx",s(o.target_x))})}},{key:"play",value:function(){this.play_enabled?(this.play_enabled=!1,this.sels.controls.pause_icon.attr("style","display:none"),this.sels.controls.play_icon.attr("style","")):(this.play_enabled=!0,this.sels.controls.pause_icon.attr("style",""),this.sels.controls.play_icon.attr("style","display:none"),this.current_x>=this.x_series.length-1&&(this.current_x=0),this.x_series_forward())}},{key:"toggle_pan_zoom",value:function(){this.pan_zoom_enabled?(this.pan_zoom_enabled=!1,this.sels.controls.pan_zoom_disabled_icon.attr("style",""),this.sels.controls.pan_zoom_enabled_icon.attr("style","display:none")):(this.pan_zoom_enabled=!0,this.sels.controls.pan_zoom_disabled_icon.attr("style","display:none"),this.sels.controls.pan_zoom_enabled_icon.attr("style",""))}},{key:"move",value:function(t){if(this.slider_dispatch.call("change"),this.current_x=this.target_x,!this.slider_moving){this.slider_moving=!0,this.update_callback.call(this.context,this.current_x,t),this.set_x_series_display(this.current_x);var e=this;d3.timer(function(){e.slider_moving=!1},100)}}},{key:"x_series_forward",value:function(){var t=this;window.setTimeout(function(){t.play_enabled&&t.current_x<t.x_series.length-1&&(t.target_x=t.current_x+1,t.move(250),t.current_x<t.x_series.length-1?t.x_series_forward():t.play())},1e3/this.play_speed)}},{key:"set_x_series_display",value:function(t){this.sels.title.x_val.html(s.num_format(this.x_series[t]))}},{key:"initialize",value:function(){this.render_slider(),this.update_viewbox(),this.sels.title.title.html(this.title),this.set_x_series_display(0),this.sels.title.x_val_unit.html(this.x_series_unit);var t=this;d3.select(window).on("resize",function(){t.render_slider(),t.update_viewbox()}),this.sels.controls.play_btn.attr("ssv-id",this.uuid).on("click",function(){t.play()}),this.sels.controls.pan_zoom_btn.attr("ssv-id",this.uuid).on("click",function(){t.toggle_pan_zoom()}),this.sels.controls.speed_btn.attr("ssv-id",this.uuid).on("click",function(){t.play_speed==t.max_speed?t.play_speed=t.min_speed:t.play_speed*=t.speed_mult;var e=t.play_speed.toString();t.sels.controls.speed_btn.select("span").html("<b>"+e+"x</b>")}),this.initialize_pan_zoom(),this.sels.controls.save_btn.attr("ssv-id",this.uuid).on("click",function(){t.to_image()}),this.sels.controls.vid_btn.attr("ssv-id",this.uuid).on("click",function(){t.to_video()})}},{key:"initialize_pan_zoom",value:function(){var t=this.sels.containers.info_layer.node().getBBox(),e=[t.x,t.y],n=this,i=d3.zoom().scaleExtent([1,8]).on("zoom",function(){if(n.pan_zoom_enabled){var i=d3.event.transform.k,r=0,s=0;t.width*i<=n.bbox_zoom.width?(r=Math.max(d3.event.transform.x,n.bbox_zoom.x-t.x-e[0]*(i-1)),r=Math.min(r,n.bbox_zoom.width-(t.x-n.bbox_zoom.x+e[0]*(i-1))-t.width*i)):(r=Math.max(d3.event.transform.x,n.bbox_zoom.x-t.x-(t.width*i-n.bbox_zoom.width)-e[0]*(i-1)),r=Math.min(r,t.x-e[0]*(i-1)-n.bbox_zoom.x)),t.height*i<=n.bbox_zoom.height?(s=Math.max(d3.event.transform.y,n.bbox_zoom.y-t.y-e[1]*(i-1)),s=Math.min(s,n.bbox_zoom.height-(t.y-n.bbox_zoom.y+e[1]*(i-1))-t.height*i)):(s=Math.max(d3.event.transform.y,n.bbox_zoom.y-t.y-(t.height*i-n.bbox_zoom.height)-e[1]*(i-1)),s=Math.min(s,t.y-e[1]*(i-1)-n.bbox_zoom.y)),n.sels.containers.info_layer.attr("transform","translate("+[r,s]+")scale("+i+")"),d3.event.transform.x=r,d3.event.transform.y=s}});this.sels.containers.svg.call(i),this.sels.controls.center_btn.attr("ssv-id",this.uuid).on("click",function(){n.sels.containers.info_layer.attr("transform","translate("+[t.x,t.y]+")scale(1)"),i.transform(n.sels.containers.svg,d3.zoomIdentity)})}},{key:"update_viewbox",value:function(){var t=this.sels.containers.svg_container.node().getBoundingClientRect(),e=this.sels.containers.svg.attr("viewBox").split(" ").map(function(t){return parseFloat(t)}),n=.05*e[3],i=e[3]/t.height,r=t.width*i-e[2];e[2]=e[2]+r,e[0]=e[0]-r/2,this.sels.containers.svg.attr("viewBox",e.join(" ")),this.sels.containers.zoom_layer.attr("x",e[0]+n).attr("width",e[2]-2*n).attr("y",e[1]+n).attr("height",e[3]-2*n).style("fill","none"),this.bbox_zoom=this.sels.containers.zoom_layer.node().getBBox()}},{key:"render_slice",value:function(t,e){var n='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',i=(new XMLSerializer).serializeToString(this.sels.containers.svg.node()),r=new Blob([n+i],{type:"image/svg+xml;charset=utf-8"}),s=window.URL.createObjectURL(r),a=this.sels.containers.svg.node().getBoundingClientRect(),o=this.sels.containers.img.attr("width",a.width).attr("height",a.height).node(),l=4,c=this.sels.containers.render.node();c.width=a.width*l,c.height=a.height*l;var d=c.getContext("2d");d.fillStyle="white",d.fillRect(0,0,a.width*l,a.height*l),o.onload=function(){d.drawImage(o,0,0),"image"==t?e(c.toDataURL()):"video"==t&&e(c.toDataURL("image/webp"))},o.src=s}},{key:"to_image",value:function(){var t=this,e=function(e){var n=document.createElement("a"),i=s.num_format(t.x_series[t.current_x])+"_"+t.x_series_unit;n.download=t.title.replace(" ","_")+"_"+i+".jpeg",n.href=e,n.click()};this.render_slice("image",e)}},{key:"to_video",value:function(){function t(){r=n>e.frames.length,r||(e.target_x=n,e.move(0),e.set_x_series_display(n),e.render_slice("video",i),r=!0,n+=1)}var e=this;e.frames=[];var n=0;e.sels.containers.progress.style("display","table"),e.sels.containers.progress.select(".progress-bar").html("Generating Video");var i=function(t){e.frames.push(t)},r=!1,s=setInterval(function(){if(n<e.x_series.length){t();var i=Math.ceil(n/e.x_series.length*100).toString()+"%";e.sels.containers.progress.select(".progress-bar").style("width",i)}else{var r=Whammy.fromImageArray(e.frames,15),a=window.URL.createObjectURL(r),o=document.createElement("a");o.download=e.title.replace(" ","_")+".webm",o.href=a,o.click(),clearInterval(s),e.sels.containers.progress.select(".progress-bar").style("width",0),e.sels.containers.progress.style("display","none")}},100)}}]),t}();e.exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(a,[null].concat(e)))}},{"./ssv_utilities.es6":6}],2:[function(t,e,n){"use strict";function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n){return new y[e.type](t,e.ids,e.description,e.conditions,e.report_id,e.popover,n)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("./ssv_renderers.es6"),c=function(){function t(e,n,i,r,a,o,l){s(this,t),this.uuid=e,this.selectors=[],n&&(this.ids=n,this.selectors=n.map(function(t){return d3.select("#"+e+" #"+t)})),this.update_functions=[],this.report_sel=d3.select("#"+e+" #"+a),this.popover_div_sel=d3.select("#"+e+" .popover-spacer"),this.description=i,this.conditions=r,this.popover=o,this.font_scale=l,this.patterns_initialized=!1,this.gen_color_scales(),this.initialize()}return o(t,[{key:"gen_color_scales",value:function(){this.conditions.map(function(t){if("color_scale"in t&&"color_levels"in t){var e=t.color_scale,n=t.color_levels;t.color_scale=d3.scaleQuantile().domain([d3.min(n),d3.max(n)]).range(e)}})}},{key:"initialize",value:function(){this.report_sel.empty()||this.update_functions.push(l.render_report(this.report_sel.node(),this.font_scale,this.conditions,this.description)),this.popover&&this.update_functions.push(l.render_popover(this.popover_div_sel,this.selectors,this.popover,this.font_scale)),this.initialize_hook(),delete this.conditions}},{key:"initialize_hook",value:function(){}},{key:"update",value:function(t,e){this.update_functions&&this.update_functions.map(function(n){"function"==typeof n&&n(t,e)})}}]),t}(),d=function(t){function e(){return s(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_hook",value:function(){var t=this;t.selectors.map(function(e,n){var i="pattern_"+t.ids[n];if(!t.patterns_initialized){var r=[];t.conditions.map(function(t){var e,n=1.01;if(e="overlay"in t?t.overlay:null,"background"==t.type)r.push(t.data.map(function(i){return[n,t.color_scale(i),t.opacity,e]}));else if("levelstatic"==t.type)r.push(t.data.map(function(n){var i=(Math.min((n-t.min_height)/(t.max_height-t.min_height)),1);return[i,t.color,t.opacity,e]}));else if("dynamiclevel"==t.type)r.push(t.data.map(function(n,i){var r=Math.min((n-t.min_height)/(t.max_height-t.min_height),1),s=t.color_scale(t.data_dynamic[i]);return[r,s,t.opacity,e]}));else if("logical"==t.type)r.push(t.data.map(function(i){var r;return r=i?t.true_color:t.false_color,[n,r,t.opacity,e]}));else if("zonaly"==t.type){var i=[];i=i.concat(t.data.map(function(n,i){return n.map(function(n,r){var s=Math.min((n-t.min_height)/(t.max_height-t.min_height),1),a=t.color_scale(t.data_dynamic[i][r]);return[s,a,t.opacity,e]})})),r=r.concat(d3.zip.apply(this,i))}}),r=d3.zip.apply(this,r),e.each(function(){t.update_functions.push(l.render_pattern(this,i,r,"fill"))})}})}}]),e}(c),u=function(t){function e(){return s(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_hook",value:function(){var t=this;t.selectors.map(function(e,n){var i="pattern_"+t.ids[n],r=[];t.patterns_initialized||(t.conditions.map(function(t){var e,e=(t.opacity,null);if("equaly"==t.type){var n=[],n=n.concat(t.data.map(function(n){return n.map(function(i,r){var s=r/n.length,a=t.color_scale(i);return[s,a,t.opacity,e]})}));r=r.concat(d3.zip.apply(this,n))}}),r=d3.zip.apply(this,r),e.each(function(){t.update_functions.push(l.render_pattern(this,i,r,"stroke"))}))})}}]),e}(c),p=function(t){function e(){return s(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_hook",value:function(){var t=this.conditions[0].data,e=this.conditions[0].color_scale,n=this.opacity,i=this;i.selectors.map(function(r){r.each(function(){i.update_functions.push(l.render_rect_heatmap(this,t,e,n))})})}}]),e}(c),h=function(t){function e(){return s(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_hook",value:function(){var t=this;t.selectors.map(function(e){if("showhide"==t.conditions[0].type){var n=t.conditions[0].data;e.datum(n);var i=function(t){n[t]||n[t]>0?e.transition().attr("opacity",1):e.transition().attr("opacity",0)};t.update_functions.push(i)}})}}]),e}(c),f=function(t){function e(){return s(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),e}(c),_=function(t){function e(){return s(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize",value:function(){var t=this.report_sel.node(),e="table_"+this.report_id,n=this.conditions[0].data,i=this.conditions[0].headers;this.update_functions.push(l.render_table(t,e,n,i,this.font_scale))}}]),e}(c),v=function(t){function e(){return s(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize",value:function(){var t=this.conditions[0].color_scale,e=this.report_sel.node(),n=this.conditions[0].opacity;l.render_color_scale(e,t,this.description,n,this.font_scale)}}]),e}(c),y={cell:d,line:u,heatmap:p,toggle:h,report:f,table:_,legend:v};e.exports=a},{"./ssv_renderers.es6":4}],3:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./ssv_controls.es6"),a=t("./ssv_elements.es6"),o=t("./ssv_selectors.es6"),l=function(){function t(e,n,r,a,l,c,d){i(this,t),this.uuid=e,this.sels=o(e),this.sels.containers.svg_container.style("font-size",d.toString()+"px"),this.sels.containers.svg.style("font-size",d.toString()+"px"),this.elements=[],this.svg_overlays=c,this.initialize_overlays(),this.set_font_scale(),s(n,r,a,this.update_elements,this),this.initialize_elements(l)}return r(t,[{key:"initialize_overlays",value:function(){this.sels.containers.svg.select("defs").empty()&&this.sels.containers.svg.append("defs");for(var t in this.svg_overlays)this.sels.containers.svg.select("defs").html(this.sels.containers.svg.select("defs").html()+this.svg_overlays[t])}},{key:"set_font_scale",value:function(){var t=parseFloat(this.sels.containers.svg.attr("viewBox").split(" ")[3])/this.sels.containers.svg_container.node().getBoundingClientRect().height;this.font_scale=t,this.sels.containers.svg.attr("font-scale",t)}},{key:"initialize_elements",value:function(t){var e=this.uuid,n=this.font_scale;this.elements=[];var i=t.length,r=this;t.forEach(function(t){setTimeout(function(){r.elements.push(a(e,t,n)),r.update_loading_progress(i)},0)})}},{key:"update_loading_progress",value:function(t){if(this.elements.length==t)this.sels.containers.progress.select(".progress-bar").style("width",0),this.sels.containers.progress.style("display","none"),this.update_elements(0);else{var e=Math.ceil(this.elements.length/t*100).toString()+"%";this.sels.containers.progress.select(".progress-bar").style("width",e)}}},{key:"update_elements",value:function(t,e){this.elements.map(function(n){n.update(t,e)})}}]),t}();window.onerror=function(t){d3.select("body").attr("JSError",t)};var c={};e.exports={add_element_context:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];c[t]=new(Function.prototype.bind.apply(l,[null].concat([t],n)))}}},{"./ssv_controls.es6":1,"./ssv_elements.es6":2,"./ssv_selectors.es6":5}],4:[function(t,e,n){"use strict";function i(t,e,n,i){if(t){var r=d3.select(t.parentNode),s=t.getBBox(),a=s.width,o=s.x,l=s.y,c=1.2,u=1,p=.1,h="#FFC107",f="#00BFA5",_="#FFFFFF",v="#FFFFFF",y="#FFEB3B",m="#616161",g="Sizing...";d3.select(t).style("visibility","hidden");var x=r.append("g").attr("transform","translate("+o+","+l+")").append("g").attr("id","ssv-report").attr("font-size",e.toString()+"em"),b=x.append("rect").attr("width",a).attr("fill",m).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge"),w=x.append("text").attr("width",a).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("x",a/2).attr("fill",h).style("font-size",c.toString()+"em").text(g),z=w.node().getBBox().height;w.attr("y",z*(1+p));var k=z*u/c,F=z*(1+2*p);b.attr("height",F);var B=k*(1+1*p),O=B+k*p;w.text(i);for(var S=0;S<n.length;S++){var A=n[S];if("report"in A&&A.report){var j=A.data,E=1;j[0].constructor===Array&&(E=j[0].length),x.append("rect").attr("width",a).attr("fill",m).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("y",F).attr("height",(E+1)*O),x.append("text").attr("width",a).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",a/2).attr("y",F+B).attr("fill",f).style("font-size",u.toString()+"em").attr("font-style","oblique").text(A.description);var C;C="section_label"in A&&""!=A.section_label?A.section_label:"Section",F+=O;for(var M=0;M<E;M++){var L;L=E>1?3:2,E>1&&x.append("text").attr("width",a).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",a/(2*L)).attr("y",F+B).attr("fill",_).style("font-size",u.toString()+"em").text(C+" #"+(M+1).toString());var P;P=E>1?j.map(function(t){return d(t[M])}):j.map(function(t){return d(t)}),x.append("text").attr("width",a).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("class","value-text").datum(P).attr("x",a/(2*(4-L))).attr("y",F+B).attr("fill",y).style("font-size",u.toString()+"em"),x.append("text").attr("width",a).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",(2*L-1)*a/(2*L)).attr("y",F+B).attr("fill",v).style("font-size",u.toString()+"em").text(A.unit),F+=O}}}}var N=function(t){r.selectAll(".value-text").text(function(e){return e[t]})};return N}function r(t,e,n,i){var r=d3.select(t.parentNode);r.select("defs").empty()&&r.append("defs");var s=t.getBBox().height;n[0].length>1&&(n=n.map(function(t){return t.sort(function(t,e){return-(t[0]-e[0])})}));var n=n.map(function(t){return t.map(function(t){var e=Math.max(0,1-t[0])*s;return[e].concat(t.slice(1,t.length))})}),a=r.select("defs"),o=a.append("pattern").attr("id",e).attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("patternContentUnits","userSpaceOnUse").datum(n),l=o.selectAll().data(function(t){return t[0]}).enter();l.each(function(){o.append("rect").attr("id","base").attr("x","0").attr("width","100%").attr("height","100%"),o.append("rect").attr("id","transition").attr("x","0").attr("width","100%").attr("height","1px").attr("fill","#FFFFFF"),o.append("rect").attr("id","overlay").attr("x","0").attr("width","100%").attr("height","100%")});var c=d3.select(t);"fill"==i?c.style("fill","url(#"+e+")"):c.style("stroke","url(#"+e+")"),c.style("fill-opacity",1),c.style("opacity",1);var d=function(t,e){o.selectAll("#base").data(function(e){return e[t]}).transition().duration(e).attr("y",function(t){return t[0]}).style("fill",function(t){return t[1]}).style("opacity",function(t){return t[2]}),o.selectAll("#transition").data(function(e){return e[t]}).transition().duration(e).attr("y",function(t){return t[0]>0?t[0]:"-1%"}).style("opacity",function(t){return t[2]}),o.selectAll("#overlay").data(function(e){return e[t]}).transition().duration(e).attr("fill",function(t){return null==t[3]?"none":"url(#"+t[3]+")"}).attr("y",function(t){return t[0]}).style("opacity",function(t){return t[2]})};return d}function s(t,e,n,i){if(t){var r=d3.select(t.parentNode),s=t.getBBox(),a=d3.scaleLinear().domain([0,e[0][0].length]).range([0,s.width]),o=d3.scaleLinear().domain([0,e[0].length]).range([0,s.height]),l=r.append("g").attr("transform","translate("+s.x+","+s.y+")").append("g"),c=e.map(function(t){return t.map(function(t){return t.map(function(t){return n(t)})})});l.data([c]);var d=l.selectAll().data(function(t){return t[0]}).enter().append("g").attr("class","x_section").attr("stroke","black").attr("stroke-width","1px");d.selectAll(".bin").data(function(t){return t}).enter().append("rect").attr("class","bin").attr("x",function(t,e){return a(e)}).attr("width",function(t,e){return a(e+1)-a(e)}).style("fill",function(t){return t}).style("fill-opacity",function(){return i}).attr("height",s.height/e[0].length),d.each(function(t,e){d3.select(this).selectAll(".bin").attr("y",o(e))});var u=function(t,e){var n=r.select("g").select("g"),i=n.selectAll(".x_section").data(function(e){return e[t]});i.selectAll(".bin").data(function(t){return t}).transition().duration(e).style("fill",function(t){return t})};return u}}function a(t,e,n,i,r){if(t){var s=d3.select(t.parentNode),a=t.getBBox(),o=a.width,l=a.x,c=a.y;d3.select(t).style("visibility","hidden");var d=s.append("g").attr("transform","translate("+l+","+c+")").append("foreignObject").attr("id","ssv-table").attr("width",o).attr("height",500).append("xhtml:table").attr("class","table").attr("id",e).datum(n);d.append("thead").append("tr").selectAll().data(i).enter().append("th").text(function(t){return t}).style("font-size",r.toString()+"em"),d.append("tbody");var u=function(t){var e=d.selectAll(".content-row").data(function(e){return e[t]});e.exit().remove(),e.enter().append("tr").merge(e).attr("class","content-row");var n=d.selectAll(".content-row").selectAll(".content-cell").data(function(t){return t});n.exit().remove(),n.enter().append("td").merge(n).text(function(t){return t}).style("font-size",r.toString()+"em").attr("class","content-cell")};return u}}function o(t,e,n,i,r){if(t){var s=d3.select(t.parentNode);d3.select(t).style("visibility","hidden");var a=t.getBBox(),o=a.width,l=a.x,c=a.y,s=d3.select(t.parentNode),d=s.append("g").attr("transform","translate("+l+","+c+")").append("g").attr("font-size",r+"em").attr("stroke","black").attr("stroke-width","0.01em"),u=e.range().length,p=d3.scaleLinear().domain([0,u]).range([0,o]),h=1.5,f=1,_=.1,v=d.append("text").text(n).attr("x",o/2).attr("y","1em").attr("text-anchor","middle").attr("font-size",h.toString()+"em"),y=v.node().getBBox().height,m=d.selectAll("rect").data(e.range());m.enter().append("rect").attr("x",function(t,e){return p(e)}).attr("y",(1+_)*y).attr("width",function(t,e){return p(e+1)-p(e)}).attr("height",y).attr("fill",function(t){return t}).style("fill-opacity",i).attr("font-size",h.toString()+"em"),m.enter().append("text").text(function(t){return e.invertExtent(t)[0].toFixed(0)}).attr("x",function(t,e){return p(e)}).attr("y",y*(2+_+f/h*(1+_))).attr("text-anchor","middle").attr("font-size",f.toString()+"em")}}function l(t,e,n,i){var r=t.append("div").style("background","#9E9E9E"),s=[150,50];"dims"in n&&(s=n.dims);var a=r.append("svg").attr("width",s[0]+"px").attr("height",s[1]+"px").style("font-size",i.toString()+"em").append("g");if(r.attr("class","ssv-popover").style("visibility","hidden"),"sparkline"==n.type)var o=c(a,s,n.x_series,n.data,n.label);return e.map(function(t){t.on("mouseover",function(){r.style("visibility","visible")}),t.on("mousemove",function(){r.style("top",d3.event.pageY+"px").style("left",d3.event.pageX+"px")}),t.on("mouseout",function(){r.style("visibility","hidden")})}),o}function c(t,e,n,i,r){var s=e[0],a=e[1],o=.05*s,l=o,c=d3.line().x(function(t,e){return p(e)}).y(function(t){return h(t)});if(r){var d=t.append("text").attr("x",o).attr("y","1.05em").attr("fill","#FFFFFF").text(r),u=d.node().getBBox();l+=2*u.y+u.height}var p=d3.scaleLinear().range([0,s-2*o]),h=d3.scaleLinear().range([a-l-o,0]),f=t.append("g").attr("transform","translate("+o+","+l+")");p.domain([0,n.length]),h.domain([d3.min(i),d3.max(i)]),f.append("path").style("fill","none").style("stroke","#FFFFFF").style("stroke-width","0.1em").attr("d",c(i));var _=f.append("circle").attr("r","0.5em").attr("fill","orange"),v=function(t,e){_.transition().duration(e).attr("cx",p(t)).attr("cy",h(i[t]))};return v}var d=t("./ssv_utilities.es6").num_format;e.exports={render_report:i,render_pattern:r,render_color_scale:o,render_table:a,render_rect_heatmap:s,render_popover:l}},{"./ssv_utilities.es6":6}],5:[function(t,e,n){"use strict";var i=function(t){var e=d3.select("#"+t),n={controls:{modebar:e.select(".modebar"),modebar_group:e.select(".modebar-group"),modebar_slider:e.select(".modebar-slider"),speed_btn:e.select("#speed-button"),play_btn:e.select("#play-button"),pan_zoom_btn:e.select("#pan-zoom-button"),center_btn:e.select("#center-button"),save_btn:e.select("#save-button"),vid_btn:e.select("#video-button"),pause_icon:e.select("#pause-icon"),play_icon:e.select("#play-icon"),pan_zoom_enabled_icon:e.select("#pan-zoom-enabled-icon"),pan_zoom_disabled_icon:e.select("#pan-zoom-disabled-icon")},title:{title:e.select("#title"),x_val:e.select("#x-val"),x_val_unit:e.select("#x-val-unit")},containers:{svg_container:e.select(".svg-container"),zoom_layer:e.select("#zoom-layer"),info_layer:e.select("#info-layer"),popover_div:e.select(".popover-spacer"),svg:e.select("#ssv-svg"),img:e.select("#img-space"),render:e.select("#render-space"),progress:e.select(".ssv-progress")}};return n};e.exports=i},{}],6:[function(t,e,n){"use strict";function i(t){return t>=1e3||t<.01?d3.format(".2e")(t):d3.format(".2f")(t)}e.exports={num_format:i}},{}]},{},[3])(3)});
//# sourceMappingURL=maps/ssv.min.js.map
