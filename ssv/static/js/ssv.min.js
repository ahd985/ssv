!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ssv=t()}}(function(){return function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return r(n?n:t)},d,d.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e,n,r,a){i(this,t),this.uuid=e,this.x_series_length=n,this.update_callback=r,this.context=a,this.play_enabled=!1,this.pan_zoom_enabled=!0,this.slider_moving=!1,this.current_x=0,this.target_x=0,this.play_speed=1,this.max_speed=8,this.min_speed=1,this.speed_mult=2,this.bbox_zoom=null,this.bbox_info=null,this.svg_container_sel=d3.select("#"+this.uuid+" .svg-container"),this.svg_sel=d3.select("#"+this.uuid+" #ssv-svg"),this.zoom_layer_sel=d3.select("#"+this.uuid+" #zoom-layer"),this.info_layer_sel=d3.select("#"+this.uuid+" #info-layer"),this.speed_btn_sel=d3.select("#"+this.uuid+" #speed-button"),this.play_btn_sel=d3.select("#"+this.uuid+" #play-button"),this.pan_zoom_btn_sel=d3.select("#"+this.uuid+" #pan-zoom-button"),this.center_btn_sel=d3.select("#"+this.uuid+" #center-button"),this.modebar_sel=d3.select("#"+this.uuid+" .modebar"),this.modebar_group_sel=d3.select("#"+this.uuid+" .modebar-group"),this.modebar_slider_sel=d3.select("#"+this.uuid+" .modebar-slider"),this.pause_icon_sel=d3.select("#"+this.uuid+" #pause-icon"),this.play_icon_sel=d3.select("#"+this.uuid+" #play-icon"),this.pan_zoom_enabled_icon_sel=d3.select("#"+this.uuid+" #pan-zoom-enabled-icon"),this.pan_zoom_disabled_icon_sel=d3.select("#"+this.uuid+" #pan-zoom-disabled-icon"),this.initialize()}return r(t,[{key:"render_slider",value:function(){var t=this.modebar_sel.node().getBoundingClientRect(),e=t.height,n=2,i=8,r=t.width-this.modebar_group_sel.node().getBoundingClientRect().width,a=d3.scaleLinear().domain([0,this.x_series_length-1]).range([0,r-2*(n+i)]).clamp(!0);this.modebar_slider_sel.selectAll("svg").remove();var s=this.modebar_slider_sel.append("svg").attr("width",r).append("g").attr("transform","translate("+(i+n).toString()+","+(e/2+n).toString()+")"),o=this;s.append("line").attr("class","slider-track").attr("x1",a.range()[0]).attr("x2",a.range()[1]).select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","slider-inset").select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","slider-overlay").call(d3.drag().on("start.interrupt",function(){s.interrupt()}).on("start drag",function(){o.target_x=Math.round(a.invert(d3.event.x)),o.move()}));var l=s.append("circle").attr("class","slider-handle").attr("r",i);this.slider_dispatch=d3.dispatch("change"),this.slider_dispatch.on("change",function(){l.attr("cx",a(o.target_x))})}},{key:"play",value:function(){this.play_enabled?(this.play_enabled=!1,this.pause_icon_sel.attr("style","display:none"),this.play_icon_sel.attr("style","")):(this.play_enabled=!0,this.pause_icon_sel.attr("style",""),this.play_icon_sel.attr("style","display:none"),this.current_x>=this.x_series_length-1&&(this.current_x=0),this.x_series_forward())}},{key:"toggle_pan_zoom",value:function(){this.pan_zoom_enabled?(this.pan_zoom_enabled=!1,this.pan_zoom_disabled_icon_sel.attr("style",""),this.pan_zoom_enabled_icon_sel.attr("style","display:none")):(this.pan_zoom_enabled=!0,this.pan_zoom_disabled_icon_sel.attr("style","display:none"),this.pan_zoom_enabled_icon_sel.attr("style",""))}},{key:"move",value:function(){if(this.slider_dispatch.call("change"),!this.slider_moving){this.slider_moving=!0,this.current_x=this.target_x,this.update_callback.call(this.context,this.current_x);var t=this;d3.timer(function(){t.slider_moving=!1},100)}}},{key:"x_series_forward",value:function(){var t=this;window.setTimeout(function(){t.play_enabled&&t.current_x<t.x_series_length-1&&(t.target_x=t.current_x+1,t.move(),t.current_x<t.x_series_length-1?t.x_series_forward():t.play())},1e3/this.play_speed)}},{key:"initialize",value:function(){this.render_slider(),this.update_viewbox();var t=this;d3.select(window).on("resize",function(){t.render_slider(),t.update_viewbox()}),this.play_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.play()}),this.pan_zoom_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.toggle_pan_zoom()}),this.speed_btn_sel.attr("ssv-id",this.uuid).on("click",function(){t.play_speed==t.max_speed?t.play_speed=t.min_speed:t.play_speed*=t.speed_mult;var e=t.play_speed.toString();t.speed_btn_sel.select("span").html("<b>"+e+"x</b>")}),this.initialize_pan_zoom()}},{key:"initialize_pan_zoom",value:function(){var t=this.info_layer_sel.node().getBBox(),e=[t.x-0,t.y-0],n=this,i=d3.zoom().scaleExtent([1,8]).on("zoom",function(){if(n.pan_zoom_enabled){var i=d3.event.transform.k,r=0,a=0;t.width*i<=n.bbox_zoom.width?(r=Math.max(d3.event.transform.x,n.bbox_zoom.x-t.x-e[0]*(i-1)),r=Math.min(r,n.bbox_zoom.width-(t.x-n.bbox_zoom.x+e[0]*(i-1))-t.width*i)):(r=Math.max(d3.event.transform.x,n.bbox_zoom.x-t.x-(t.width*i-n.bbox_zoom.width)-e[0]*(i-1)),r=Math.min(r,t.x-e[0]*(i-1)-n.bbox_zoom.x)),t.height*i<=n.bbox_zoom.height?(a=Math.max(d3.event.transform.y,n.bbox_zoom.y-t.y-e[1]*(i-1)),a=Math.min(a,n.bbox_zoom.height-(t.y-n.bbox_zoom.y+e[1]*(i-1))-t.height*i)):(a=Math.max(d3.event.transform.y,n.bbox_zoom.y-t.y-(t.height*i-n.bbox_zoom.height)-e[1]*(i-1)),a=Math.min(a,t.y-e[1]*(i-1)-n.bbox_zoom.y)),n.info_layer_sel.attr("transform","translate("+[r,a]+")scale("+i+")"),d3.event.transform.x=r,d3.event.transform.y=a}});this.zoom_layer_sel.call(i),this.center_btn_sel.attr("ssv-id",this.uuid).on("click",function(){n.info_layer_sel.attr("transform","translate("+[t.x,t.y]+")scale(1)"),i.transform(n.zoom_layer_sel,d3.zoomIdentity)})}},{key:"update_viewbox",value:function(){var t=this.svg_container_sel.node().getBoundingClientRect(),e=this.svg_sel.attr("viewBox").split(" ").map(function(t){return parseFloat(t)}),n=.05*e[3],i=e[3]/t.height,r=t.width*i-e[2];e[2]=e[2]+r,e[0]=e[0]-r/2,this.svg_sel.attr("viewBox",e.join(" ")),this.zoom_layer_sel.attr("x",e[0]+n).attr("width",e[2]-2*n).attr("y",e[1]+n).attr("height",e[3]-2*n),this.bbox_zoom=this.zoom_layer_sel.node().getBBox()}}]),t}();e.exports=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(a,[null].concat(e)))}},{}],2:[function(t,e,n){"use strict";function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,n){return new m[e.type](t,e.ids,e.description,e.conditions,e.report_id,n)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=t("./ssv_renderers.es6"),c=function(){function t(e,n,i,r,s,o){a(this,t),this.uuid=e,this.selectors=[],n&&(this.ids=n,this.selectors=n.map(function(t){return d3.select("#"+e+" #"+t)})),this.pattern_update_functions=[],this.report_sel=d3.select("#"+e+" #"+s),this.description=i,this.conditions=r,this.font_scale=o,this.patterns_initialized=!1,this.report_initialized=!1,this.initialize_color_scales()}return o(t,[{key:"initialize_color_scales",value:function(){this.conditions.map(function(t){if("color_scale"in t&&"color_levels"in t){var e=t.color_scale,n=t.color_levels;t.color_scale=d3.scaleQuantile().domain([d3.min(n),d3.max(n)]).range(e)}})}},{key:"update_report",value:function(t){this.report_initialized||(this.report_update_func=l.get_report_update_func(this.report_sel,this.font_scale,this.conditions,this.description),this.report_initialized=!0),this.report_update_func(t)}},{key:"update_pattern",value:function(t){this.pattern_update_functions.map(function(e){e(t)})}}]),t}(),d=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"update",value:function(t){var e=this;e.selectors.map(function(t,n){var i="pattern_"+e.ids[n];if(!e.patterns_initialized){var r=[];e.conditions.map(function(t){var e,n=1.01;if(e="overlay"in t?t.overlay:null,"background"==t.type)r.push(t.data.map(function(i){return[n,t.color_scale(i),t.opacity,e]}));else if("levelstatic"==t.type)r.push(t.data.map(function(n){var i=(Math.min((n-t.min_height)/(t.max_height-t.min_height)),1);return[i,t.color,t.opacity,e]}));else if("dynamiclevel"==t.type)r.push(t.data.map(function(n,i){var r=Math.min((n-t.min_height)/(t.max_height-t.min_height),1),a=t.color_scale(t.data_dynamic[i]);return[r,a,t.opacity,e]}));else if("logical"==t.type)r.push(t.data.map(function(i){var r;return r=i?t.true_color:t.false_color,[n,r,t.opacity,e]}));else if("zonaly"==t.type){var i=[];i=i.concat(t.data.map(function(n,i){return n.map(function(n,r){var a=Math.min((n-t.min_height)/(t.max_height-t.min_height),1),s=t.color_scale(t.data_dynamic[i][r]);return[a,s,t.opacity,e]})})),r=r.concat(d3.zip.apply(this,i))}}),r=d3.zip.apply(this,r),t.each(function(){e.pattern_update_functions.push(l.get_pattern_update_func(this,i,r,"fill"))})}}),e.update_pattern(t),e.patterns_initialized=!0,e.report_sel.empty()||e.update_report(t)}}]),e}(c),u=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"update",value:function(t){var e=this;e.selectors.map(function(t,n){var i="pattern_"+e.ids[n],r=[];e.patterns_initialized||(e.conditions.map(function(t){var e,e=(t.opacity,null);if("equaly"==t.type){var n=[],n=n.concat(t.data.map(function(n){return n.map(function(i,r){var a=r/n.length,s=t.color_scale(i);return[a,s,t.opacity,e]})}));r=r.concat(d3.zip.apply(this,n))}}),r=d3.zip.apply(this,r),t.each(function(){e.pattern_update_functions.push(l.get_pattern_update_func(this,i,r,"stroke"))}))}),e.update_pattern(t),e.patterns_initialized=!0,e.report_sel.empty()||e.update_report(t)}}]),e}(c),p=function(t){function e(){var t;a(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var o=i(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return o.conditions[0].data[0].constructor==Array?o.conditions.num_sections=o.conditions[0].data[0].length:o.conditions[0].num_sections=1,o.initialize(),o}return r(e,t),o(e,[{key:"initialize",value:function(){var t=this.conditions[0].data[0],e=this;e.selectors.map(function(n){var i=d3.select(n.node().parentNode),r=n.node().getBBox(),a=d3.scaleLinear().domain([0,t[0].length]).range([0,r.width]),s=d3.scaleLinear().domain([0,t.length]).range([0,r.height]),o=i.append("g").attr("transform","translate("+r.x+","+r.y+")").append("g"),l=e.conditions[0].color_scale,c=e.conditions[0].data.map(function(t){return t.map(function(t){return t.map(function(t){return l(t)})})});o.data([c]);var d=o.selectAll().data(function(t){return t[0]}).enter().append("g").attr("class","x_section").attr("stroke","black").attr("stroke-width","1px");d.selectAll(".bin").data(function(t){return t}).enter().append("rect").attr("class","bin").attr("x",function(t,e){return a(e)}).attr("width",function(t,e){return a(e+1)-a(e)}).style("fill",function(t){return t}).style("fill-opacity",function(t){return e.conditions[0].opacity}).attr("height",r.height/t.length),d.each(function(t,e){d3.select(this).selectAll(".bin").attr("y",s(e))})})}},{key:"update",value:function(t){var e=this;e.selectors.map(function(e){var n=d3.select(e.node().parentNode),i=n.select("g").select("g"),r=i.selectAll(".x_section").data(function(e){return e[t]});r.selectAll(".bin").data(function(t){return t}).transition().style("fill",function(t){return t})}),e.report_sel.empty()||e.update_report(t)}}]),e}(c),h=function(t){function e(){var t;a(this,e);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var o=i(this,(t=Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)));return o.data_initialized=!1,o}return r(e,t),o(e,[{key:"update",value:function(t){var e=this;e.selectors.map(function(n){e.data_initialized||"showhide"==e.conditions[0].type&&n.datum(e.conditions[0].data);var i=n.datum();i[t]||i[t]>0?n.transition().attr("opacity",1):n.transition().attr("opacity",0)}),e.data_initialized=!0,e.report_sel.empty()||e.update_report(t)}}]),e}(c),_=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"update",value:function(t){this.report_sel.empty()||this.update_report(t)}}]),e}(c),f=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_report",value:function(){var t=d3.select(this.report_sel.node().parentNode);if(!this.report_sel.empty()){var e=this.report_sel.node().getBBox(),n=e.width,i=e.x,r=e.y,a="table_"+this.report_id;this.report_sel.style("visibility","hidden");var s=t.append("g").attr("transform","translate("+i+","+r+")").append("foreignObject").attr("id","ssv-table").attr("width",n).attr("height",500).append("xhtml:table").attr("class","table").attr("id",a).datum(this.conditions[0].data),o=this;s.append("thead").append("tr").selectAll().data(this.conditions[0].headers).enter().append("th").text(function(t){return t}).style("font-size",o.font_scale.toString()+"em")}s.append("tbody"),this.report_initialized=!0}},{key:"update_report",value:function(t){this.report_initialized||this.initialize_report();var e="table_"+this.report_id,n=d3.select("#"+this.uuid+" #"+e+" tbody"),i=n.selectAll(".content-row").data(function(e){return e[t]});i.exit().remove(),i.enter().append("tr").merge(i).attr("class","content-row");var r=this,a=n.selectAll(".content-row").selectAll(".content-cell").data(function(t){return t});a.exit().remove(),a.enter().append("td").merge(a).text(function(t){return t}).style("font-size",r.font_scale.toString()+"em").attr("class","content-cell")}},{key:"update",value:function(t){this.report_sel.empty()||this.update_report(t)}}]),e}(c),y=function(t){function e(){return a(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return r(e,t),o(e,[{key:"initialize_report",value:function(){var t=d3.select(this.report_sel.node().parentNode);if(!this.report_sel.empty()){this.report_sel.style("visibility","hidden");var e=this.report_sel.node().getBBox(),n=e.width,i=e.x,r=e.y,a=this,t=d3.select(this.report_sel.node().parentNode),s=t.append("g").attr("transform","translate("+i+","+r+")").append("g").attr("font-size",a.font_scale+"em").attr("stroke","black").attr("stroke-width","0.01em"),o=this.conditions[0].color_scale,l=o.range().length,c=d3.scaleLinear().domain([0,l]).range([0,n]),d=1.5,u=1,p=.1,h=s.append("text").text(this.description).attr("x",n/2).attr("y","1em").attr("text-anchor","middle").attr("font-size",d.toString()+"em"),_=h.node().getBBox().height,f=s.selectAll("rect").data(o.range());f.enter().append("rect").attr("x",function(t,e){return c(e)}).attr("y",(1+p)*_).attr("width",function(t,e){return c(e+1)-c(e)}).attr("height",_).attr("fill",function(t){return t}).style("fill-opacity",this.conditions[0].opacity).attr("font-size",d.toString()+"em"),f.enter().append("text").text(function(t){return o.invertExtent(t)[0].toFixed(0)}).attr("x",function(t,e){return c(e)}).attr("y",_*(2+p+u/d*(1+p))).attr("text-anchor","middle").attr("font-size",u.toString()+"em")}this.report_initialized=!0}},{key:"update_report",value:function(t){this.report_initialized||this.initialize_report()}},{key:"update",value:function(t){this.report_sel.empty()||this.update_report(t)}}]),e}(c),m={cell:d,line:u,heatmap:p,toggle:h,report:_,table:f,legend:y};e.exports=s},{"./ssv_renderers.es6":4}],3:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("./ssv_controls.es6"),s=t("./ssv_elements.es6"),o=t("./ssv_utilities.es6"),l=function(){function t(e,n,r,s){i(this,t),this.uuid=e,this.svg_sel=d3.select("#"+this.uuid+" #ssv-svg"),this.svg_container_sel=d3.select("#"+this.uuid+" .ssv-visual"),this.x_val_sel=d3.select("#"+this.uuid+" #x-series-val"),this.x_series=n,this.elements=[],this.svg_overlays=s,this.initialize_overlays(),this.set_font_scale(),this.initialize_elements(r),a(e,n.length,this.update_elements,this)}return r(t,[{key:"initialize_overlays",value:function(){this.svg_sel.select("defs").empty()&&this.svg_sel.append("defs");for(var t in this.svg_overlays)this.svg_sel.select("defs").html(this.svg_sel.select("defs").html()+this.svg_overlays[t])}},{key:"set_font_scale",value:function(){var t=parseFloat(this.svg_sel.attr("viewBox").split(" ")[3])/this.svg_container_sel.node().getBoundingClientRect().height;this.font_scale=t,this.svg_sel.attr("font-scale",t)}},{key:"initialize_elements",value:function(t){var e=this.uuid,n=this.font_scale;this.elements=t.map(function(t){return s(e,t,n)}),this.update_elements(0),this.elements.map(function(t){"conditions"in t&&delete t.conditions})}},{key:"update_elements",value:function(t){this.x_val_sel.html(o(this.x_series[t])),this.elements.map(function(e){e.update(t)})}}]),t}();window.onerror=function(t){d3.select("body").attr("JSError",t)};var c={};e.exports={add_element_context:function(t,e,n,i){c[t]=new l(t,e,n,i)}}},{"./ssv_controls.es6":1,"./ssv_elements.es6":2,"./ssv_utilities.es6":5}],4:[function(t,e,n){"use strict";function i(t,e,n,i){var r=d3.select(t.node().parentNode);if(!t.empty()){var s=t.node().getBBox(),o=s.width,l=s.x,c=s.y,d=1.2,u=1,p=.1,h="#FFC107",_="#00BFA5",f="#FFFFFF",y="#FFFFFF",m="#FFEB3B",v="#616161",g="Sizing...";t.style("visibility","hidden");var x=r.append("g").attr("transform","translate("+l+","+c+")").append("g").attr("id","ssv-report").attr("font-size",e.toString()+"em"),b=x.append("rect").attr("width",o).attr("fill",v).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge"),z=x.append("text").attr("width",o).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",o/2).attr("fill",h).style("font-size",d.toString()+"em").text(g),w=z.node().getBBox().height;z.attr("y",w*(1+p));var k=w*u/d,B=w*(1+2*p);b.attr("height",B);var F=k*(1+1*p),O=F+k*p;z.text(i);for(var A=0;A<n.length;A++){var S=n[A];if("report"in S&&S.report){var j=S.data,M=1;j[0].constructor===Array&&(M=j[0].length),x.append("rect").attr("width",o).attr("fill",v).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("y",B).attr("height",(M+1)*O),x.append("text").attr("width",o).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",o/2).attr("y",B+F).attr("fill",_).style("font-size",u.toString()+"em").attr("font-style","oblique").text(S.description);var N;N="section_label"in S&&""!=S.section_label?S.section_label:"Section",B+=O;for(var C=0;C<M;C++){var P;P=M>1?3:2,M>1&&x.append("text").attr("width",o).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",o/(2*P)).attr("y",B+F).attr("fill",f).style("font-size",u.toString()+"em").text(N+" #"+(C+1).toString());var E;E=M>1?j.map(function(t){return a(t[C])}):j.map(function(t){return a(t)}),x.append("text").attr("width",o).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("class","value-text").datum(E).attr("x",o/(2*(4-P))).attr("y",B+F).attr("fill",m).style("font-size",u.toString()+"em"),x.append("text").attr("width",o).attr("fill-opacity","1").attr("text-anchor","middle").attr("alignment-baseline","after-edge").attr("x",(2*P-1)*o/(2*P)).attr("y",B+F).attr("fill",y).style("font-size",u.toString()+"em").text(S.unit),B+=O}}}}var q=function(t){r.selectAll(".value-text").text(function(e){return e[t]})};return q}function r(t,e,n,i){var r=d3.select(t.parentNode);r.select("defs").empty()&&r.append("defs");var a=t.getBBox().height;n[0].length>1&&(n=n.map(function(t){return t.sort(function(t,e){return-(t[0]-e[0])})}));var n=n.map(function(t){return t.map(function(t){var e=Math.max(0,1-t[0])*a;return[e].concat(t.slice(1,t.length))})}),s=r.select("defs"),o=s.append("pattern").attr("id",e).attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("patternContentUnits","userSpaceOnUse").datum(n),l=o.selectAll().data(function(t){return t[0]}).enter();l.each(function(){o.append("rect").attr("id","base").attr("x","0").attr("width","100%").attr("height","100%"),o.append("rect").attr("id","transition").attr("x","0").attr("width","100%").attr("height","1px").attr("fill","#FFFFFF"),o.append("rect").attr("id","overlay").attr("x","0").attr("width","100%").attr("height","100%")});var c=d3.select(t);"fill"==i?c.style("fill","url(#"+e+")"):c.style("stroke","url(#"+e+")"),c.style("fill-opacity",1),c.style("opacity",1);var d=function(t){o.selectAll("#base").data(function(e){return e[t]}).transition().attr("y",function(t){return t[0]}).style("fill",function(t){return t[1]}).style("opacity",function(t){return t[2]}),o.selectAll("#transition").data(function(e){return e[t]}).transition().attr("y",function(t){return t[0]>0?t[0]:"-1%"}).style("opacity",function(t){return t[2]}),o.selectAll("#overlay").data(function(e){return e[t]}).transition().attr("fill",function(t){return null==t[3]?"none":"url(#"+t[3]+")"}).attr("y",function(t){return t[0]}).style("opacity",function(t){return t[2]})};return d}var a=t("./ssv_utilities.es6");e.exports={get_report_update_func:i,get_pattern_update_func:r}},{"./ssv_utilities.es6":5}],5:[function(t,e,n){"use strict";function i(t){return t>=1e3||t<.01?d3.format(".2e")(t):d3.format(".2f")(t)}e.exports=i},{}]},{},[3])(3)});
//# sourceMappingURL=maps/ssv.min.js.map
